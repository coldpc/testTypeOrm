webpackJsonp([35],{1005:function(t,e,i){var a=i(983);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(2)("641f0eae",a,!0,{})},1174:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-list"},[i("sk-data-set",{attrs:{"auto-query":"","query-service":t.baseData.getAccountGrade},on:{load:t.onLoadGradeInfoDs}}),t._v(" "),i("sk-data-set",{ref:"table",attrs:{"auto-create":""},model:{value:t.queryDs,callback:function(e){t.queryDs=e},expression:"queryDs"}}),t._v(" "),i("sk-data-set",{attrs:{"query-service":t.baseData.vendorCountries,"auto-query":""},model:{value:t.vendorCountriesDs,callback:function(e){t.vendorCountriesDs=e},expression:"vendorCountriesDs"}}),t._v(" "),i("sk-data-set",{attrs:{"auto-query":!1,"query-bind":t.queryDs,pagination:"","page-size":"10",queryPara:t.queryActivityConfig,"query-service":t.activity.getActivityList},on:{load:t.onLoadList},model:{value:t.activityItemDs,callback:function(e){t.activityItemDs=e},expression:"activityItemDs"}}),t._v(" "),i("sk-fold",{staticClass:"baseInfo",attrs:{title:t.$t("activityBaseInfo")}},[i("sk-form",{attrs:{bind:t.queryDs}},[i("sk-row",[i("sk-col",{attrs:{size:2}},[i("sk-select",{attrs:{readonly:!!t.storeId,value:t.countryId,label:t.$t("countryArea"),name:"countryId","option-bind":t.vendorCountriesDs,"display-field":"countryName","value-field":"countryId"}})],1),t._v(" "),i("sk-col",{attrs:{size:2}},[i("sk-text-input",{attrs:{hintText:t.$t("activityEventName"),label:t.$t("activityEventName"),name:"activeName"}})],1)],1),t._v(" "),i("sk-row",[i("sk-col",{attrs:{size:2}},[i("sk-text-input",{attrs:{hintText:t.$t("activityActivityAddress"),label:t.$t("activityActivityAddress"),name:"address"}})],1),t._v(" "),i("sk-col",{attrs:{size:2}},[i("sk-date-picker",{attrs:{name:"beginTime",valueType:"string",format:"yyyy-MM-dd",label:t.$t("activityBeginDate"),hintText:t.$t("activityBeginDate")}})],1)],1),t._v(" "),i("sk-row",[i("sk-col",{attrs:{size:2}},[i("h5",{staticClass:"sub-title",domProps:{innerHTML:t._s(t.$t("activityIsDisplay"))}}),t._v(" "),i("sk-checkbox",{attrs:{name:"shelfFlagOn",label:t.$t("online")}}),t._v(" "),i("sk-checkbox",{attrs:{name:"shelfFlagOff",label:t.$t("offline")}})],1),t._v(" "),i("sk-col",{attrs:{size:2}},[i("h5",{staticClass:"sub-title",domProps:{innerHTML:t._s(t.$t("status"))}}),t._v(" "),i("sk-checkbox",{attrs:{name:"notOpen",label:t.$t("activityNotStarted")}}),t._v(" "),i("sk-checkbox",{attrs:{name:"processing",label:t.$t("activityInProgress")}}),t._v(" "),i("sk-checkbox",{attrs:{name:"finished",label:t.$t("activityFinished")}})],1)],1),t._v(" "),i("sk-row",[i("sk-col",{staticClass:"btn-group",attrs:{size:1}},[i("sk-button",{attrs:{label:t.$t("search"),bind:t.activityItemDs,action:"query",primary:""}}),t._v(" "),i("sk-button",{attrs:{label:t.$t("clear"),action:"reset"}})],1)],1)],1)],1),t._v(" "),i("sk-row",[t.canEdit?i("sk-col",{attrs:{size:1}},[i("sk-button",{attrs:{label:t.$t("batchOnline"),primary:""},on:{click:function(e){t.activityUp(e)}}}),t._v(" "),i("sk-button",{attrs:{label:t.$t("batchOffline"),primary:""},on:{click:function(e){t.activityDown(e)}}})],1):t._e()],1),t._v(" "),i("sk-table",{ref:"activitysListTable",attrs:{bind:t.activityItemDs,showCheckbox:""}},[i("div",{attrs:{slot:"row"},slot:"row"},[i("sk-column",{attrs:{name:"index",title:t.$t("lineNo"),width:"60px",align:"center",formatter:t.renderIndex}}),t._v(" "),i("sk-column",{attrs:{name:"attachList","view-type":"img",title:t.$t("thImg"),align:"center"}}),t._v(" "),i("sk-column",{attrs:{formatter:t.renderName,name:"country",title:t.$t("countryArea"),align:"center"}}),t._v(" "),i("sk-column",{attrs:{name:"activityName",formatter:t.forActivityName,title:t.$t("activityEventName")},on:{"cell-click":t.goActivityDetail}}),t._v(" "),i("sk-column",{attrs:{name:"activityType",formatter:t.forActivityType,title:t.$t("activityType")}}),t._v(" "),i("sk-column",{attrs:{name:"activityAddress",title:t.$t("activityActivityAddress")}}),t._v(" "),i("sk-column",{attrs:{formatter:t.formatTime,name:"beginTime",title:t.$t("startDate"),align:"center"}}),t._v(" "),i("sk-column",{attrs:{formatter:t.formatTime,name:"endTime",title:t.$t("expireDate"),align:"center"}}),t._v(" "),i("sk-column",{attrs:{formatter:t.renderOnSale,name:"shelfStatus",title:t.$t("onDisplay"),align:"center"}}),t._v(" "),i("sk-column",{attrs:{formatter:t.renderState,name:"state",title:t.$t("status"),align:"center"}}),t._v(" "),i("sk-column",{attrs:{formatter:t.forOperate,name:"shelfFlag",title:t.$t("operation"),align:"center"},on:{"cell-click":t.doOperation}})],1)])],1)},staticRenderFns:[]}},685:function(t,e,i){function a(t){i(1005)}var s=i(0)(i(924),i(1174),a,"data-v-c1d7d402",null);t.exports=s.exports},719:function(t,e,i){"use strict";var a=i(38),s={getStoreNodes:{url:"/store/getSubStoreNodes"},getStoreNodesWithActivityCount:{url:"/activity/getSubStoreNodesWithActivityCount"},getCurrentActivitysByStoreId:{url:"/activity/getCurrentActivitysByStoreId",params:{storeId:""}},deleteActivity:{url:"/activity/deleteActivity",params:{activityId:""}},saveOrUpdateActivity:{url:"/activity/saveOrUpdateActivity",contentType:"json",params:{activity:""}},getActivityList:{url:"/activity/getActivitiesByIds",params:{order:"asc",offset:0,limit:10,storeType:1}},getActivityById:{url:"/activity/getActivityById",params:{activityId:"activityId"}},getStoreByStoreId:{url:"/store/getStoreByStoreId",paras:{storeId:""}},findActivityItemDetail:{url:"/activity/findActivityItemDetail",params:{activityId:"storeId"}},getItemsByQueryParams:{url:"/item/getItemsByQueryParams",params:{storeId:"storeId",order:"asc",itemName:"itemName",itemModel:"itemModel"}},changeToOnLine:{url:"/activity/changeToOnLine",params:{activityIds:"activityIds"}},changeToOffLine:{url:"/activity/changeToOffLine",params:{activityIds:"activityIds"}},deleteByIds:{url:"/activity/deleteByIds",params:{activityIds:"activityIds"}},insertItem:{url:"/activity/saveActivityItems",params:{activityId:"",itemIds:""}},removeItem:{url:"/activity/deleteActivityItems",params:{activityId:"",itemIds:""}},getActivitySignList:{url:"/activitySign/getActivitySignListByActivityId",method:"get",params:{activityId:"activityId"}},getSkusByItemId:{url:"/sku/getSkusByItemId",params:{itemId:"itemId"}},getBenefitsByActivityId:{url:"/activity/getBenefitsByActivityId",params:{activityId:"activityId"}},saveActivityBenefitMappings:{contentType:"json",url:"/activity/saveActivityBenefitMappings",params:{activityId:"activityId"}},saveActivityItemMappings:{contentType:"json",url:"/activity/saveActivityItemMappings",params:{activityId:"activityId"}},getItemsByActivityId:{url:"/activity/getItemsByActivityId",params:{activityId:"activityId"}},getActivityStoreMappingsTreeByActivityId:{url:"/activity/getActivityStoreMappingsTreeByActivityId",params:{activityId:"activityId"}},saveActivityStoreMappings:{contentType:"json",url:"/activity/saveActivityStoreMappings",params:{activityId:"activityId"}},getBenefitArgProperties:{url:"/activity/getBenefitArgProperties",params:{benefitType:"benefitType"}},initQueryActivityDate:{url:"/activity/getActivityInitDateScope"}};e.a=i.i(a.a)(s,"activity")},924:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(27),s=i.n(a),r=i(129),n=i(719);e.default={data:function(){return window.test=this,{queryDs:null,vendorCountriesDs:null,baseData:r.a,activityItemDs:null,activity:n.a,currentData:{},queryActivityConfig:{storeType:1},gradeData:null,queryType:"brand",queryData:{},countryId:"",storeId:""}},methods:{onLoadGradeInfoDs:function(t){var e=this.gradeData=t[0].getData();this.countryId=e.countryId,this.storeId=e.storeId,this.storeId&&(this.countryId=e.countryAuthList[0]),this.activityItemDs.query({countryId:e.countryId,storeId:e.storeId})},onLoadList:function(){var t=this.activityItemDs.lastQueryPara,e=void 0;e=t.countryId?"country":"brand",this.queryType=e,this.queryData=s()({},t)},formatTime:function(t){var e=new Date(t),i=e.getFullYear(),a=e.getMonth()+1,s=e.getDate(),r=e.getHours(),n=e.getMinutes(),c=e.getSeconds();return a=a<10?"0"+a:a,s=s<10?"0"+s:s,r=r<10?"0"+r:r,n=n<10?"0"+n:n,c=c<10?"0"+c:c,i+"-"+a+"-"+s},renderIndex:function(t,e){return parseInt(e+1)},renderName:function(t,e,i){return t?t.enName+" "+t.countryName:"Global 全球"},renderState:function(t){switch(t){case"PROCESS":return this.$t("activityInProgress");case"COMING":return this.$t("activityNotStarted");default:return this.$t("activityFinished")}},renderOnSale:function(t,e,i){var a=i.data.shelfFlag;return a&&"ONLINE"==a?this.$t("onlineAlready"):a&&"OFFLINE"==a?this.$t("offlineAlready"):"-"},forOperate:function(t){return t&&"OFFLINE"==t?"<a class='edit' title=''>"+this.$t("edit")+"</a><br/><a class='sell' title=''>"+this.$t("online")+"</a><br/><a class='delItem' title=''>"+this.$t("delete")+"</a><br/><a class='signNo' title=''>"+this.$t("activityCheckInList")+"</a>":"<a class='edit' title=''>"+this.$t("edit")+"</a><br/><a class='unSell' title=''>"+this.$t("offline")+"</a><br/><a class='delItem' title=''>"+this.$t("delete")+"</a><br/><a class='signNo' title=''>"+this.$t("activityCheckInList")+"</a>"},doOperation:function(t,e,i,a,s){var r=t.target.className;switch(r){case"edit":this.$store.dispatch("router/push",{name:"page.activity.edit",title:"活动编辑",query:{type:r,activityId:s.getValue("activityId")}});break;case"signNo":this.$store.dispatch("router/push",{name:"page.activity.signIn",title:"签到统计",query:{type:r,activityId:s.getValue("activityId")}});break;case"sell":case"unSell":this.confirm(t,s);break;case"delItem":this.delItem(s)}},forActivityName:function(t,e,i){return"<a class='goActivityDetail' title='' activityId='"+i.getValue("activityId")+"'>"+t+"</a>"},forActivityType:function(t,e,i){return"BRAND"===t?"BRAND/品牌":"COUPON/优惠券"},goActivityDetail:function(t,e,i,a,s){this.$store.dispatch("router/push",{name:"page.activity.edit",title:"活动编辑",query:{type:"edit",activityId:s.getValue("activityId")}})},confirm:function(t,e){var i=t.target.innerText+"?",a=t.target.className,s={activityIds:e.data.activityId};this.$store.commit("confirm",{message:i,ok:function(){"sell"==a?n.a.changeToOnLine.execute({data:s,success:function(){this.activityItemDs.query()}.bind(this)}):"unSell"==a&&n.a.changeToOffLine.execute({data:s,success:function(){this.activityItemDs.query()}.bind(this)})}.bind(this)})},activityUp:function(){for(var t=this.$refs.activitysListTable.getSelectData(),e=[],i="",a=0;a<t.length;a++)e.push(t[a].activityId);if(0==e.length)return void this.$store.commit("message",this.$t("noOnDisplay"));i=e.join(","),this.$store.commit("confirm",{message:this.$t("activityConfirmOnDisplay"),ok:function(){n.a.changeToOnLine.execute({data:{activityIds:i},success:function(t){this.$store.commit("message",this.$t("online")),this.$refs.activitysListTable.selectAll(!1),this.activityItemDs.query()}.bind(this)})}.bind(this)})},activityDown:function(){for(var t=this.$refs.activitysListTable.getSelectData(),e=[],i="",a=0;a<t.length;a++)e.push(t[a].activityId);if(0==e.length)return void this.$store.commit("message",this.$t("noDownDisplay"));i=e.join(","),this.$store.commit("confirm",{message:this.$t("activityConfirmOffDisplay"),ok:function(){n.a.changeToOffLine.execute({data:{activityIds:i},success:function(t){this.$store.commit("message",this.$t("offline")),this.$refs.activitysListTable.selectAll(!1),this.activityItemDs.query()}.bind(this)})}.bind(this)})},delItem:function(t){if("ONLINE"==t.data.shelfFlag)return void this.$store.commit("message",this.$t("activityDeleteTrip"));var e={activityIds:t.data.activityId};this.$store.commit("confirm",{message:this.$t("DeleteNow"),ok:function(){n.a.deleteByIds.execute({data:e,success:function(){this.activityItemDs.query()}.bind(this)})}.bind(this)})}},created:function(){},computed:{canEdit:function(){var t=this.gradeData,e=this.queryData;if(this.queryType&&t){if(t.hasBrandGlobal)return!0;if(t.hasCountry){if(e.countryId==t.countryId)return!0}else if(t.storeId)return!0}return!1}}}},983:function(t,e,i){e=t.exports=i(1)(!0),e.push([t.i,".slideUp-enter-active[data-v-c1d7d402],.slideUp-leave-active[data-v-c1d7d402]{transition:all .5s;opacity:1}.slideUp-enter[data-v-c1d7d402],.slideUp-leave-active[data-v-c1d7d402]{opacity:0}.title[data-v-c1d7d402]{padding-bottom:10px;border-bottom:1px solid #000}.btn-group[data-v-c1d7d402]{text-align:right;padding-top:50px}.baseInfo[data-v-c1d7d402]{margin-bottom:40px}","",{version:3,sources:["F:/project/vueMuseUI-master/src/page/activity/list.vue"],names:[],mappings:"AAKA,8EAEE,mBAAqB,AACrB,SAAW,CACZ,AACD,uEAEE,SAAW,CACZ,AACD,wBACE,oBAAqB,AACrB,4BAA8B,CAC/B,AACD,4BACE,iBAAkB,AAClB,gBAAkB,CACnB,AACD,2BACE,kBAAoB,CACrB",file:"list.vue",sourcesContent:["\n.activity-list[data-v-c1d7d402] {\n  /*width: 80%;*/\n  /*margin: 0 auto;*/\n}\n.slideUp-enter-active[data-v-c1d7d402],\n.slideUp-leave-active[data-v-c1d7d402] {\n  transition: all 0.5s;\n  opacity: 1;\n}\n.slideUp-enter[data-v-c1d7d402],\n.slideUp-leave-active[data-v-c1d7d402] {\n  opacity: 0;\n}\n.title[data-v-c1d7d402] {\n  padding-bottom: 10px;\n  border-bottom: 1px solid #000;\n}\n.btn-group[data-v-c1d7d402] {\n  text-align: right;\n  padding-top: 50px;\n}\n.baseInfo[data-v-c1d7d402] {\n  margin-bottom: 40px;\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=35.e0cf159ddace86c65130.js.map