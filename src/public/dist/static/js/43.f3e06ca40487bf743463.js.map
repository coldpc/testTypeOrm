{"version":3,"sources":["webpack:///static/js/43.f3e06ca40487bf743463.js","webpack:///./src/page/item/list.vue?56c9","webpack:///./src/page/item/list.vue","webpack:///./src/lib/dataModules/item.js?fdeb*************","webpack:///list.vue?1308"],"names":["webpackJsonp","1136","module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","before-query","beforeRefreshItemTable","pagination","page-size","auto-query","query-bind","queryDs","query-service","itemModule","getItems","on","load","onLoadItemList","update","onUpdateSort","model","value","callback","$$v","itemListDs","expression","_v","baseData","getAccountGrade","onLoadGradeInfoDs","auto-create","getRootCatalogs","bigCatalogDs","bind","bind-field","bind-para-key","getCatalogsByParentId","catalogDs","vendorCountries","countriesDs","getStoreByCountry","storeDs","staticStyle","margin-top","title","$t","size","countryId","readonly","storeId","null-title","label","name","option-bind","display-field","value-field","multiple","text-align","primary","action","ref","show-checkbox","canEdit","slot","isStore","click","itemListAction","_e","isBrand","isCountry","width","align","formatter","renderIndex","view-type","renderItemInfo","cell-click","onClickOperationCell","renderCatalogs","renderItemTag","formatYkPrice","if-hide","renderShelf","editable","renderOperation","staticRenderFns","695","__webpack_require__","Component","718","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__lib_dataModules_BaseDataCenter__","config","enumeration","baseInfoType","attr","spec","url","paras","rootCatalogId","order","offset","limit","getItemsForActivitySelect","deleteByIds","event","params","itemIds","online","offline","cancelAssign","getItemsOrderBySort","catalogId","batchUpdateItemSort","itemListString","getItemBaseInfo","type","getItemById","itemId","maintain","contentType","getAssignCountryDetail","assignCountry","unAssignCountry","getAssignStoreDetail","assignStore","hasShelfFlag","itemList","optStores","unAssignStore","getItemAssignDetail","cancelAssignOneCountry","i","935","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_2__lib_dataModules_baseData__","__WEBPACK_IMPORTED_MODULE_3__lib_dataModules_item__","__WEBPACK_IMPORTED_MODULE_4__lib_utils_ArrayApi__","__WEBPACK_IMPORTED_MODULE_5__lib_utils_money__","data","window","test","ifHideOperation","queryType","gradeData","queryData","computed","hasBrandGlobal","hasCountry","methods","v","index","record","shelfFlag","getValue","html","parseInt","join","str","forEach","item","desc","format","para","lastQueryPara","resetItemListSort","e","target","className","gotoEditItem","deleteItem","gotoItemDetail","gotoAssignDetail","lastData","last","records","l","length","getData","getDataByAttr","oldSort","sort","setValue","key","ds","setItemListSort","saveItemListSort","getSaveSortItemData","execute","success","$store","commit","getAllData","result","push","message","ok","hasStore","countryAuthList","query","Array","getIds","mask","info","updateRecordsData","delete","assignCountryNum","assignStoryNum","onStoreNum","gotoAssignCountry","dispatch","ids","gotoAssignStore","getSelectedRecords","filterRecords","$refs","itemListTable","selectAll"],"mappings":"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","file":"static/js/43.f3e06ca40487bf743463.js","sourcesContent":["webpackJsonp([43],{\n\n/***/ 1136:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"main-container\"\n  }, [_c('div', [_c('sk-data-set', {\n    attrs: {\n      \"before-query\": _vm.beforeRefreshItemTable,\n      \"pagination\": true,\n      \"page-size\": \"10\",\n      \"auto-query\": false,\n      \"query-bind\": _vm.queryDs,\n      \"query-service\": _vm.itemModule.getItems\n    },\n    on: {\n      \"load\": _vm.onLoadItemList,\n      \"update\": _vm.onUpdateSort\n    },\n    model: {\n      value: (_vm.itemListDs),\n      callback: function($$v) {\n        _vm.itemListDs = $$v\n      },\n      expression: \"itemListDs\"\n    }\n  }), _vm._v(\" \"), _c('sk-data-set', {\n    attrs: {\n      \"auto-query\": \"\",\n      \"query-service\": _vm.baseData.getAccountGrade\n    },\n    on: {\n      \"load\": _vm.onLoadGradeInfoDs\n    }\n  }), _vm._v(\" \"), _c('sk-data-set', {\n    attrs: {\n      \"auto-create\": true\n    },\n    model: {\n      value: (_vm.queryDs),\n      callback: function($$v) {\n        _vm.queryDs = $$v\n      },\n      expression: \"queryDs\"\n    }\n  }), _vm._v(\" \"), _c('sk-data-set', {\n    attrs: {\n      \"auto-query\": true,\n      \"query-service\": _vm.baseData.getRootCatalogs\n    },\n    model: {\n      value: (_vm.bigCatalogDs),\n      callback: function($$v) {\n        _vm.bigCatalogDs = $$v\n      },\n      expression: \"bigCatalogDs\"\n    }\n  }), _vm._v(\" \"), _c('sk-data-set', {\n    attrs: {\n      \"auto-query\": false,\n      \"bind\": _vm.queryDs,\n      \"bind-field\": \"rootCatalogId\",\n      \"bind-para-key\": \"parentCatalogId\",\n      \"query-service\": _vm.baseData.getCatalogsByParentId\n    },\n    model: {\n      value: (_vm.catalogDs),\n      callback: function($$v) {\n        _vm.catalogDs = $$v\n      },\n      expression: \"catalogDs\"\n    }\n  }), _vm._v(\" \"), _c('sk-data-set', {\n    attrs: {\n      \"auto-query\": \"\",\n      \"bind\": _vm.queryDs,\n      \"query-service\": _vm.baseData.vendorCountries\n    },\n    model: {\n      value: (_vm.countriesDs),\n      callback: function($$v) {\n        _vm.countriesDs = $$v\n      },\n      expression: \"countriesDs\"\n    }\n  }), _vm._v(\" \"), _c('sk-data-set', {\n    attrs: {\n      \"auto-query\": false,\n      \"bind\": _vm.queryDs,\n      \"bind-field\": \"countryId\",\n      \"query-service\": _vm.baseData.getStoreByCountry\n    },\n    model: {\n      value: (_vm.storeDs),\n      callback: function($$v) {\n        _vm.storeDs = $$v\n      },\n      expression: \"storeDs\"\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticStyle: {\n      \"margin-top\": \"30px\"\n    }\n  }, [_c('sk-form', {\n    attrs: {\n      \"bind\": _vm.queryDs\n    }\n  }, [_c('sk-fold', {\n    attrs: {\n      \"title\": _vm.$t('queryPara')\n    }\n  }, [_c('sk-row', [_c('sk-col', {\n    attrs: {\n      \"size\": 2\n    }\n  }, [_c('sk-select', {\n    attrs: {\n      \"value\": _vm.countryId,\n      \"readonly\": !!_vm.storeId,\n      \"null-title\": _vm.$t('global'),\n      \"bind\": _vm.queryDs,\n      \"label\": _vm.$t('country'),\n      \"name\": \"countryId\",\n      \"option-bind\": _vm.countriesDs,\n      \"display-field\": \"countryName\",\n      \"value-field\": \"countryId\"\n    }\n  })], 1), _vm._v(\" \"), _c('sk-col', {\n    attrs: {\n      \"size\": 2\n    }\n  }, [_c('sk-select', {\n    attrs: {\n      \"value\": _vm.storeId,\n      \"bind\": _vm.queryDs,\n      \"null-title\": _vm.$t('wholeCountry'),\n      \"label\": _vm.$t('store'),\n      \"name\": \"storeId\",\n      \"display-field\": \"storeName\",\n      \"value-field\": \"storeId\",\n      \"option-bind\": _vm.storeDs\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('sk-row', [_c('sk-col', {\n    attrs: {\n      \"size\": 2\n    }\n  }, [_c('sk-select', {\n    attrs: {\n      \"option-bind\": _vm.bigCatalogDs,\n      \"display-field\": \"catalogName\",\n      \"value-field\": \"catalogId\",\n      \"label\": _vm.$t('category'),\n      \"name\": \"rootCatalogId\"\n    }\n  })], 1), _vm._v(\" \"), _c('sk-col', {\n    attrs: {\n      \"size\": 2\n    }\n  }, [_c('sk-select', {\n    attrs: {\n      \"label\": _vm.$t('subCategory'),\n      \"multiple\": false,\n      \"option-bind\": _vm.catalogDs,\n      \"value-field\": \"catalogId\",\n      \"display-field\": \"catalogName\",\n      \"name\": \"catalogId\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('sk-row', [_c('sk-col', {\n    attrs: {\n      \"size\": 2\n    }\n  }, [_c('sk-text-input', {\n    attrs: {\n      \"label\": _vm.$t('itemModel'),\n      \"name\": \"itemModel\"\n    }\n  })], 1), _vm._v(\" \"), _c('sk-col', {\n    attrs: {\n      \"size\": 2\n    }\n  }, [_c('sk-text-input', {\n    attrs: {\n      \"label\": _vm.$t('itemName'),\n      \"name\": \"itemName\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('sk-row', [_c('sk-col', {\n    attrs: {\n      \"size\": 1\n    }\n  }, [_c('div', {\n    staticClass: \"query-btn-con\",\n    staticStyle: {\n      \"margin-top\": \"20px\",\n      \"text-align\": \"right\"\n    }\n  }, [_c('sk-button', {\n    attrs: {\n      \"primary\": \"\",\n      \"label\": _vm.$t('query'),\n      \"action\": \"query\",\n      \"bind\": _vm.itemListDs\n    }\n  }), _vm._v(\" \"), _c('sk-button', {\n    attrs: {\n      \"action\": \"reset\",\n      \"label\": _vm.$t('clear')\n    }\n  })], 1)])], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('div', [_c('sk-table', {\n    ref: \"itemListTable\",\n    attrs: {\n      \"bind\": _vm.itemListDs,\n      \"show-checkbox\": _vm.canEdit\n    }\n  }, [_c('div', {\n    attrs: {\n      \"slot\": \"buttons\"\n    },\n    slot: \"buttons\"\n  }, [(_vm.isStore && _vm.canEdit) ? _c('sk-button', {\n    attrs: {\n      \"label\": _vm.$t('batchOnline'),\n      \"action\": \"patchOnline\",\n      \"primary\": \"\"\n    },\n    on: {\n      \"click\": _vm.itemListAction\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.isStore && _vm.canEdit) ? _c('sk-button', {\n    attrs: {\n      \"label\": _vm.$t('batchOffline'),\n      \"action\": \"patchOff\"\n    },\n    on: {\n      \"click\": _vm.itemListAction\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.isBrand && _vm.canEdit) ? _c('sk-button', {\n    attrs: {\n      \"primary\": \"\",\n      \"label\": _vm.$t('assignCountry'),\n      \"action\": \"assignCountry\"\n    },\n    on: {\n      \"click\": _vm.itemListAction\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.isCountry && _vm.canEdit) ? _c('sk-button', {\n    attrs: {\n      \"primary\": \"\",\n      \"label\": _vm.$t('assignStore'),\n      \"action\": \"assignStore\"\n    },\n    on: {\n      \"click\": _vm.itemListAction\n    }\n  }) : _vm._e(), _vm._v(\" \"), (!_vm.isStore && _vm.canEdit) ? _c('sk-button', {\n    attrs: {\n      \"label\": _vm.$t('cancelAssign'),\n      \"action\": \"cancelAssign\"\n    },\n    on: {\n      \"click\": _vm.itemListAction\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.canEdit) ? _c('sk-button', {\n    attrs: {\n      \"label\": _vm.$t('batchDelete'),\n      \"action\": \"patchDelete\"\n    },\n    on: {\n      \"click\": _vm.itemListAction\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.isStore && _vm.canEdit) ? _c('sk-button', {\n    attrs: {\n      \"primary\": \"\",\n      \"label\": _vm.$t('saveSort'),\n      \"action\": \"sortSave\"\n    },\n    on: {\n      \"click\": _vm.itemListAction\n    }\n  }) : _vm._e()], 1), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"slot\": \"row\"\n    },\n    slot: \"row\"\n  }, [_c('sk-column', {\n    attrs: {\n      \"name\": \"index\",\n      \"title\": _vm.$t('lineNo'),\n      \"width\": \"100px\",\n      \"align\": \"center\",\n      \"formatter\": _vm.renderIndex\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"name\": \"headAttacheList\",\n      \"view-type\": \"img\",\n      \"align\": \"center\",\n      \"title\": _vm.$t('thImg')\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"name\": \"itemId\",\n      \"title\": _vm.$t('itemModelName'),\n      \"formatter\": _vm.renderItemInfo,\n      \"align\": \"center\"\n    },\n    on: {\n      \"cell-click\": _vm.onClickOperationCell\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"name\": \"catalogMappingList\",\n      \"title\": _vm.$t('itemCategory'),\n      \"formatter\": _vm.renderCatalogs,\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"name\": \"itemTagMappings\",\n      \"title\": _vm.$t('itemTag'),\n      \"formatter\": _vm.renderItemTag,\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"name\": \"unit\",\n      \"title\": _vm.$t('currency'),\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"name\": \"factPrice\",\n      \"view-type\": \"money\",\n      \"title\": _vm.$t('price'),\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"name\": \"discountPrice\",\n      \"formatter\": _vm.formatYkPrice,\n      \"title\": _vm.$t('yaokPrice'),\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"if-hide\": !_vm.isBrand,\n      \"name\": \"assignCountryNum\",\n      \"title\": _vm.$t('assignCountryNum'),\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"if-hide\": _vm.isStore,\n      \"name\": \"assignStoryNum\",\n      \"title\": _vm.$t('assignStoreNum'),\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"if-hide\": _vm.isStore,\n      \"name\": \"onStoreNum\",\n      \"title\": _vm.$t('onlineStoreNum'),\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"if-hide\": !_vm.isStore,\n      \"name\": \"shelfFlag\",\n      \"title\": _vm.$t('status'),\n      \"formatter\": _vm.renderShelf,\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"if-hide\": !(_vm.isStore && _vm.canEdit),\n      \"name\": \"sort\",\n      \"editable\": \"\",\n      \"title\": _vm.$t('sortSet'),\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"if-hide\": !(_vm.canEdit),\n      \"align\": \"center\",\n      \"name\": \"action\",\n      \"title\": _vm.$t('operation'),\n      \"formatter\": _vm.renderOperation\n    },\n    on: {\n      \"cell-click\": _vm.onClickOperationCell\n    }\n  })], 1)])], 1)])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 695:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(935),\n  /* template */\n  __webpack_require__(1136),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 718:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__lib_dataModules_BaseDataCenter__ = __webpack_require__(38);\n\n\nvar config = {\n    enumeration: {\n        baseInfoType: {\n            attr: \"ATTRIBUTE\", //属性\n            spec: \"SPEC\" //规格\n        }\n    },\n\n    //商品列表查询\n    getItems: {\n        url: \"/item/getItemsByQueryParams\",\n        paras: {\n            rootCatalogId: \"\",\n            countryId: 103000,\n            order: \"asc\",\n            offset: 0,\n            limit: 10,\n            storeId: \"\"\n        }\n    },\n\n    getItemsForActivitySelect: {\n        url: \"/item/getItemsForActivitySelect\",\n        paras: {}\n    },\n\n    //删除商品\n    deleteByIds: {\n        url: \"/item/deleteByIds\",\n        event: \"\",\n        params: {\n            itemIds: \"itemIds\"\n        }\n    },\n\n    //上架\n    online: {\n        url: \"/item/changeToOnLine\",\n        event: \"\",\n        params: {\n            itemIds: \"itemIds\"\n        }\n    },\n\n    //下架\n    offline: {\n        url: \"/item/changeToOffLine\",\n        event: \"\",\n        params: {\n            itemIds: \"itemIds\"\n        }\n    },\n\n    //取消分配\n    cancelAssign: {\n        url: \"/item/assignCancel\",\n        event: \"\",\n        params: {\n            itemIds: \"itemIds\"\n        }\n    },\n\n    getItemsOrderBySort: {\n        url: \"/item/getItemsOrderBySort\",\n        event: \"\",\n        params: {\n            rootCatalogId: \"\",\n            catalogId: \"\"\n        }\n    },\n\n    //提交排序\n    batchUpdateItemSort: {\n        url: \"/item/batchUpdateItemSort\",\n        params: {\n            itemListString: \"\"\n        }\n    },\n\n    //获取商品基本属性 通过大类 商品上新用\n    getItemBaseInfo: {\n        url: \"/itemAttributeMaster/queryByTypeAndCatalogIdOrderBySort\",\n        params: { catalogId: \"\", type: \"\" }\n    },\n\n    //获取商品\n    getItemById: {\n        url: \"/item/getItemSaveOrInsert\",\n        event: \"\",\n        params: {\n            itemId: \"\"\n        }\n    },\n\n    //商品上新或者保存\n    maintain: {\n        url: \"/item/saveOrInsert\",\n        contentType: 'application/json',\n        params: {}\n    },\n\n    //查询分配国家的详情 itemIds\n    getAssignCountryDetail: {\n        url: \"/itemAssigned/getCountryTodoAssigned\",\n        params: { itemIds: \"\" }\n    },\n\n    //分配国家\n    assignCountry: {\n        contentType: \"json\",\n        url: \"/itemAssigned/countryAssigned\",\n        params: {}\n    },\n\n    //取消分配国家\n    unAssignCountry: {\n        contentType: \"json\",\n        url: \"/itemAssigned/countryUnAssigned\",\n        params: {}\n    },\n\n    //查询分配门店的详情\n    getAssignStoreDetail: {\n        url: \"/itemAssigned/getStoreTodoAssigned\",\n        itemIds: \"\"\n    },\n\n    //分配门店\n    assignStore: {\n        contentType: \"json\",\n        url: \"/itemAssigned/storeAssigned\",\n        params: {\n            hasShelfFlag: \"\",\n            itemList: \"\",\n            optStores: \"\"\n        }\n    },\n\n    //取消分配门店\n    unAssignStore: {\n        contentType: \"json\",\n        url: \"/itemAssigned/storeUnAssigned\",\n        params: {\n            hasShelfFlag: \"\",\n            itemList: \"\",\n            optStores: \"\"\n        }\n    },\n\n    //获取商品分配详情\n    getItemAssignDetail: {\n        url: \"/itemAssigned/getItemAssignsDetail\",\n        params: { itemId: '' }\n    },\n\n    //取消商品分配到某个国家 countryItemId\n    cancelAssignOneCountry: {\n        url: \"/itemAssigned/unAssignedCountry\",\n        paras: { itemIds: \"\" }\n    }\n\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__lib_dataModules_BaseDataCenter__[\"a\" /* createDataModule */])(config, \"order\"));\n\n/***/ }),\n\n/***/ 935:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(130);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__lib_dataModules_baseData__ = __webpack_require__(129);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__lib_dataModules_item__ = __webpack_require__(718);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__lib_utils_ArrayApi__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__lib_utils_money__ = __webpack_require__(131);\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        window.test = this;\n\n        return {\n\n            ifHideOperation: true,\n\n            countryId: null, //国家id\n            storeId: null, //商店id\n\n            queryDs: null, //基本信息\n            itemListDs: null,\n\n            bigCatalogDs: null, //大类\n            catalogDs: null, //小类\n            countriesDs: null,\n            storeDs: null,\n\n            baseData: __WEBPACK_IMPORTED_MODULE_2__lib_dataModules_baseData__[\"a\" /* default */],\n            itemModule: __WEBPACK_IMPORTED_MODULE_3__lib_dataModules_item__[\"a\" /* default */],\n\n            queryType: \"brand\", //brand store country\n            gradeData: null, //权限数据\n            queryData: {}\n        };\n    },\n\n\n    computed: {\n        isCountry: function isCountry() {\n            return this.queryType === 'country';\n        },\n        isStore: function isStore() {\n            return this.queryType === 'store';\n        },\n        isBrand: function isBrand() {\n            return this.queryType === 'brand';\n        },\n        canEdit: function canEdit() {\n            var gradeData = this.gradeData;\n            var queryData = this.queryData;\n            var queryType = this.queryType;\n\n            if (queryType && gradeData) {\n                //全球权限进来\n                if (gradeData.hasBrandGlobal) {\n                    return true;\n                } else if (gradeData.hasCountry) {\n\n                    //国家权限进来\n                    if (queryData.countryId == gradeData.countryId) {\n                        return true;\n                    }\n                } else if (queryData.storeId == gradeData.storeId) {\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n\n    methods: {\n        //渲染操作\n        renderOperation: function renderOperation(v, index, record) {\n            var isStore = this.isStore;\n            var shelfFlag = record.getValue(\"shelfFlag\");\n\n            //无论如何都是可编辑的\n            var html = \"<a class='edit'>\" + this.$t('edit') + \"</a>\";\n\n            //是否采用门店作为查询条件\n            if (isStore) {\n                if (shelfFlag === 'OFFLINE') {\n                    //下架的状态才能上架\n                    html += \"<br><a class='online'>\" + this.$t('online') + \"</a>\";\n                } else {\n                    html += \"<br><a class='offline'>\" + this.$t('offline') + \"</a>\";\n                }\n\n                //没有分配国家可以删除\n                if (!(record.getValue(\"assignCountryNum\") > 0)) {\n                    html += \"<br><a class='delete'>\" + this.$t('delete') + \"</a>\";\n                }\n            } else {\n                //如果国家地区条件查询 没有分配门店数即为可删除\n                if (!(record.getValue(\"assignStoryNum\") > 0 || record.getValue(\"assignCountryNum\") > 0)) {\n                    html += \"<br><a class='delete'>\" + this.$t('delete') + \"</a>\";\n                }\n\n                html += \"<br><a class='assignDetail'>\" + this.$t('assignDetail') + \"</a>\";\n            }\n            return html;\n        },\n\n\n        //渲染index\n        renderIndex: function renderIndex(v, index) {\n            return parseInt(index + 1);\n        },\n        renderCatalogs: function renderCatalogs(v) {\n            v = v || [];\n            return v.join(\" \") || '-'; //ArrayApi.getFieldValue(v, \"catalogName\", \" \");\n        },\n\n\n        // 渲染活动标签\n        renderItemTag: function renderItemTag(v) {\n            if (!v) {\n                return this.$t('none');\n            } else {\n                // v 循环给出itemTagMappings\n                var str = '';\n                v.forEach(function (item) {\n                    str += item.desc + \"<br>\";\n                });\n                return str;\n            }\n        },\n        formatYkPrice: function formatYkPrice(v) {\n            return !!v ? __WEBPACK_IMPORTED_MODULE_5__lib_utils_money__[\"a\" /* default */].format(v) : this.$t('none');\n        },\n        renderItemInfo: function renderItemInfo(v, index, record) {\n            var html = \"<div class='itemId'><a class='itemDetail'>\" + record.getValue(\"itemName\") + \"</a></div>\";\n            html += \"<div class='disabled-text'>\" + record.getValue(\"itemModel\") + \"</div>\";\n            return html;\n        },\n        renderShelf: function renderShelf(v) {\n            var html = void 0;\n            if (\"ONLINE\" === v) {\n                html = this.$t('onlineAlready');\n            } else {\n                html = this.$t('offlineAlready');\n            }\n            return html;\n        },\n        onLoadItemList: function onLoadItemList() {\n            var para = this.itemListDs.lastQueryPara,\n                queryType = void 0;\n\n            if (para.storeId) {\n                queryType = \"store\";\n            } else if (para.countryId) {\n                queryType = \"country\";\n            } else {\n                queryType = \"brand\";\n            }\n\n            this.queryType = queryType;\n            this.queryData = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()({}, para);\n\n            this.resetItemListSort();\n        },\n        onClickOperationCell: function onClickOperationCell(e, value, name, index, record) {\n            var actionType = e.target.className;\n\n            switch (actionType) {\n                case \"edit\":\n                    this.gotoEditItem(record);\n                    break;\n                case \"delete\":\n                    this.deleteItem(record);\n                    break;\n                case \"itemDetail\":\n                    this.gotoItemDetail(record);\n                    break;\n                case \"assignDetail\":\n                    this.gotoAssignDetail(record);\n                    break;\n                case \"online\":\n                    this.online(record);\n                    break;\n                case \"offline\":\n                    this.offline(record);\n                    break;\n\n            }\n        },\n\n\n        /********************操作sort************************/\n        resetItemListSort: function resetItemListSort(lastData) {\n            var item = void 0,\n                data = void 0,\n                last = void 0;\n            var records = this.itemListDs.records || [];\n            for (var i = 0, l = records.length; i < l; i++) {\n                item = records[i].getData();\n\n                last = __WEBPACK_IMPORTED_MODULE_4__lib_utils_ArrayApi__[\"a\" /* default */].getDataByAttr(lastData, \"itemId\", item.itemId);\n                if (last && last[0]) {\n                    item.oldSort = last[0].sort;\n                    records[i].setValue(\"sort\", item.oldSort);\n                } else {\n                    item.oldSort = item.sort;\n                }\n            }\n            return data;\n        },\n        onUpdateSort: function onUpdateSort(value, key, record, ds) {\n            if (key == \"sort\") {\n                var records = ds.records,\n                    index = 0;\n                for (var i = 0, l = records.length; i < l; i++) {\n                    if (records[i] == record) {\n                        index = i;\n                        break;\n                    }\n                }\n                //this.setItemListSort(index, parseInt(value), records);\n            }\n        },\n\n\n        //自动+10的排序 去除\n        setItemListSort: function setItemListSort(index, value, records) {\n            var record = void 0,\n                sort = void 0;\n            for (var i = index, l = records.length; i < l; i++) {\n                record = records[i];\n\n                sort = parseInt(record.getValue(\"sort\"));\n                if (sort < value) {\n                    sort = value + 10;\n                    record.setValue(\"sort\", sort);\n                }\n            }\n        },\n\n\n        //保存排序\n        saveItemListSort: function saveItemListSort(data) {\n            data = data || this.getSaveSortItemData();\n            if (data.length > 0) {\n                __WEBPACK_IMPORTED_MODULE_3__lib_dataModules_item__[\"a\" /* default */].batchUpdateItemSort.execute({\n                    data: {\n                        itemListString: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(data)\n                    },\n                    success: function () {\n                        this.$store.commit(\"message\", this.$t('saveSuccess'));\n                        this.resetItemListSort(data);\n                    }.bind(this)\n                });\n            }\n        },\n\n\n        //获取可以保存的sort\n        getSaveSortItemData: function getSaveSortItemData(ds) {\n            ds = ds || this.itemListDs;\n            var data = ds.getAllData() || [];\n            var result = [],\n                item = void 0;\n            for (var i = 0, l = data.length; i < l; i++) {\n                item = data[i];\n                if (item.oldSort != item.sort) {\n                    result.push({\n                        sort: item.sort,\n                        itemId: item.itemId\n                    });\n                }\n            }\n            return result;\n        },\n        beforeRefreshItemTable: function beforeRefreshItemTable(ds) {\n            var result = this.getSaveSortItemData(ds);\n\n            if (result.length > 0) {\n                this.$store.commit(\"confirm\", {\n                    message: this.$t('haveAlterData'),\n                    ok: function () {\n                        this.saveItemListSort(result);\n                        result = null;\n                    }.bind(this)\n                });\n            }\n            return true;\n        },\n\n\n        //加载账号级别 品牌 国家 门店\n        onLoadGradeInfoDs: function onLoadGradeInfoDs(records) {\n            var data = this.gradeData = records[0].getData();\n            var para = {};\n            if (!data.hasBrandGlobal) {\n                para.countryId = data.countryId;\n                if (data.hasCountry) {\n                    this.countryId = data.countryId;\n                } else if (data.hasStore) {\n                    this.countryId = data.countryId || data.countryAuthList[0];\n                    this.storeId = data.storeId;\n                    para.storeId = data.storeId;\n                }\n            }\n            this.itemListDs.query(para);\n        },\n\n\n        //上架\n        online: function online(records) {\n            //把records转化为数组\n            if (!(records instanceof Array)) {\n                records = [records];\n            }\n\n            __WEBPACK_IMPORTED_MODULE_3__lib_dataModules_item__[\"a\" /* default */].online.execute({\n                data: {\n                    itemIds: this.getIds(records).join(\",\")\n                },\n                mask: {\n                    info: this.$t(\"saving\")\n                },\n                success: function () {\n                    this.$store.commit(\"message\", this.$t('onlineSuccess'));\n                    this.itemListDs.updateRecordsData(records, {\n                        shelfFlag: \"ONLINE\"\n                    });\n                    records = null;\n                }.bind(this)\n            });\n        },\n\n\n        //下架\n        offline: function offline(records) {\n            //把records转化为数组\n            if (!(records instanceof Array)) {\n                records = [records];\n            }\n\n            __WEBPACK_IMPORTED_MODULE_3__lib_dataModules_item__[\"a\" /* default */].offline.execute({\n                data: {\n                    itemIds: this.getIds(records).join(\",\")\n                },\n                mask: {\n                    info: this.$t('saving')\n                },\n                success: function () {\n                    this.$store.commit(\"message\", this.$t('offlineSuccess'));\n                    this.itemListDs.updateRecordsData(records, {\n                        shelfFlag: \"OFFLINE\"\n                    });\n                    records = null;\n                }.bind(this)\n            });\n        },\n\n\n        //删除商品\n        deleteItem: function deleteItem(records) {\n            if (!(records instanceof Array)) {\n                records = [records];\n            }\n            this.$store.commit(\"confirm\", {\n                message: this.$t(\"DeleteNow\"),\n                ok: function () {\n                    __WEBPACK_IMPORTED_MODULE_3__lib_dataModules_item__[\"a\" /* default */].deleteByIds.execute({\n                        data: {\n                            itemIds: this.getIds(records).join(\",\")\n                        },\n                        mask: {\n                            info: this.$t(\"saving\")\n                        },\n                        success: function () {\n                            this.itemListDs.delete(records);\n                            records = null;\n                        }.bind(this)\n                    });\n                }.bind(this)\n            });\n        },\n\n\n        //取消分配\n        cancelAssign: function cancelAssign(records) {\n            if (!(records instanceof Array)) {\n                records = [records];\n            }\n            __WEBPACK_IMPORTED_MODULE_3__lib_dataModules_item__[\"a\" /* default */].cancelAssign.execute({\n                data: {\n                    itemIds: this.getIds(records).join(\",\")\n                },\n                mask: {\n                    info: this.$t(\"saving\")\n                },\n                success: function () {\n                    this.itemListDs.updateRecordsData(records, {\n                        assignCountryNum: \"0\",\n                        assignStoryNum: \"0\",\n                        onStoreNum: 0,\n                        shelfFlag: \"OFFLINE\"\n                    });\n                }.bind(this)\n            });\n        },\n\n\n        //去分配国家\n        gotoAssignCountry: function gotoAssignCountry(records) {\n            this.$store.dispatch('router/push', {\n                title: \"分配国家\",\n                name: \"page.item.assignCountry\",\n                query: {\n                    ids: this.getIds(records).join(\",\")\n                }\n            });\n        },\n\n\n        //去分配门店\n        gotoAssignStore: function gotoAssignStore(records) {\n            this.$store.dispatch('router/push', {\n                title: \"分配门店\",\n                name: \"page.item.assignStore\",\n                query: {\n                    ids: this.getIds(records).join(\",\")\n                }\n            });\n        },\n\n\n        //去查看分配详情\n        gotoAssignDetail: function gotoAssignDetail(record) {\n            this.$store.dispatch('router/push', {\n                title: \"分配详情\",\n                name: \"page.item.assignDetail\",\n                query: {\n                    itemId: record.getValue(\"itemId\"),\n                    type: this.queryType,\n                    storeId: this.queryData.storeId,\n                    countryId: this.queryData.countryId\n                }\n            });\n        },\n\n\n        //去编辑\n        gotoEditItem: function gotoEditItem(record) {\n            this.$store.dispatch('router/push', {\n                title: \"商品编辑\",\n                name: \"page.item.edit\",\n                query: {\n                    itemId: record.getValue(\"itemId\")\n                }\n            });\n        },\n        gotoItemDetail: function gotoItemDetail(record) {\n            this.$store.dispatch('router/push', {\n                title: \"商品详情\",\n                name: \"page.item.detail\",\n                query: {\n                    itemId: record.getValue(\"itemId\")\n                }\n            });\n        },\n\n\n        /*********************action操作*************************/\n        itemListAction: function itemListAction(action) {\n            var records = this.itemListDs.getSelectedRecords();\n            switch (action) {\n                case \"patchOff\":\n                    records = this.filterRecords(records, \"shelfFlag\", \"ONLINE\"); //过滤下架的数据\n                    if (records.length > 0) {\n                        this.offline(records);\n                    }\n                    break;\n\n                case \"patchOnline\":\n                    records = this.filterRecords(records, \"shelfFlag\", \"OFFLINE\"); //过滤下架的数据\n                    if (records.length > 0) {\n                        this.online(records);\n                    }\n                    break;\n\n                case \"assignCountry\":\n                    if (records.length > 0) {\n                        this.gotoAssignCountry(records);\n                    }\n                    break;\n\n                case \"assignStore\":\n                    if (records.length > 0) {\n                        this.gotoAssignStore(records);\n                    }\n                    break;\n\n                case \"cancelAssign\":\n                    if (records.length > 0) {\n                        this.cancelAssign(records);\n                    }\n                    break;\n\n                case \"patchDelete\":\n                    if (records.length > 0) {\n                        this.deleteItem(records);\n                    }\n                    break;\n\n                case \"sortSave\":\n                    this.saveItemListSort();\n                    break;\n            }\n\n            if (records.length > 0) {\n                this.$refs.itemListTable.selectAll(false);\n            }\n        },\n\n\n        //获取ids 用于更新\n        getIds: function getIds(records) {\n            var result = [];\n            for (var i = 0, l = records.length; i < l; i++) {\n                result.push(records[i].getValue(\"itemId\"));\n            }\n            return result;\n        },\n\n\n        //过滤数据\n        filterRecords: function filterRecords(records, key, value) {\n            var result = [],\n                record = void 0;\n            for (var i = 0, l = records.length; i < l; i++) {\n                record = records[i];\n                if (record.getValue(key) == value) {\n                    result.push(record);\n                }\n            }\n            return result;\n        }\n    }\n});\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/43.f3e06ca40487bf743463.js","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"main-container\"\n  }, [_c('div', [_c('sk-data-set', {\n    attrs: {\n      \"before-query\": _vm.beforeRefreshItemTable,\n      \"pagination\": true,\n      \"page-size\": \"10\",\n      \"auto-query\": false,\n      \"query-bind\": _vm.queryDs,\n      \"query-service\": _vm.itemModule.getItems\n    },\n    on: {\n      \"load\": _vm.onLoadItemList,\n      \"update\": _vm.onUpdateSort\n    },\n    model: {\n      value: (_vm.itemListDs),\n      callback: function($$v) {\n        _vm.itemListDs = $$v\n      },\n      expression: \"itemListDs\"\n    }\n  }), _vm._v(\" \"), _c('sk-data-set', {\n    attrs: {\n      \"auto-query\": \"\",\n      \"query-service\": _vm.baseData.getAccountGrade\n    },\n    on: {\n      \"load\": _vm.onLoadGradeInfoDs\n    }\n  }), _vm._v(\" \"), _c('sk-data-set', {\n    attrs: {\n      \"auto-create\": true\n    },\n    model: {\n      value: (_vm.queryDs),\n      callback: function($$v) {\n        _vm.queryDs = $$v\n      },\n      expression: \"queryDs\"\n    }\n  }), _vm._v(\" \"), _c('sk-data-set', {\n    attrs: {\n      \"auto-query\": true,\n      \"query-service\": _vm.baseData.getRootCatalogs\n    },\n    model: {\n      value: (_vm.bigCatalogDs),\n      callback: function($$v) {\n        _vm.bigCatalogDs = $$v\n      },\n      expression: \"bigCatalogDs\"\n    }\n  }), _vm._v(\" \"), _c('sk-data-set', {\n    attrs: {\n      \"auto-query\": false,\n      \"bind\": _vm.queryDs,\n      \"bind-field\": \"rootCatalogId\",\n      \"bind-para-key\": \"parentCatalogId\",\n      \"query-service\": _vm.baseData.getCatalogsByParentId\n    },\n    model: {\n      value: (_vm.catalogDs),\n      callback: function($$v) {\n        _vm.catalogDs = $$v\n      },\n      expression: \"catalogDs\"\n    }\n  }), _vm._v(\" \"), _c('sk-data-set', {\n    attrs: {\n      \"auto-query\": \"\",\n      \"bind\": _vm.queryDs,\n      \"query-service\": _vm.baseData.vendorCountries\n    },\n    model: {\n      value: (_vm.countriesDs),\n      callback: function($$v) {\n        _vm.countriesDs = $$v\n      },\n      expression: \"countriesDs\"\n    }\n  }), _vm._v(\" \"), _c('sk-data-set', {\n    attrs: {\n      \"auto-query\": false,\n      \"bind\": _vm.queryDs,\n      \"bind-field\": \"countryId\",\n      \"query-service\": _vm.baseData.getStoreByCountry\n    },\n    model: {\n      value: (_vm.storeDs),\n      callback: function($$v) {\n        _vm.storeDs = $$v\n      },\n      expression: \"storeDs\"\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    staticStyle: {\n      \"margin-top\": \"30px\"\n    }\n  }, [_c('sk-form', {\n    attrs: {\n      \"bind\": _vm.queryDs\n    }\n  }, [_c('sk-fold', {\n    attrs: {\n      \"title\": _vm.$t('queryPara')\n    }\n  }, [_c('sk-row', [_c('sk-col', {\n    attrs: {\n      \"size\": 2\n    }\n  }, [_c('sk-select', {\n    attrs: {\n      \"value\": _vm.countryId,\n      \"readonly\": !!_vm.storeId,\n      \"null-title\": _vm.$t('global'),\n      \"bind\": _vm.queryDs,\n      \"label\": _vm.$t('country'),\n      \"name\": \"countryId\",\n      \"option-bind\": _vm.countriesDs,\n      \"display-field\": \"countryName\",\n      \"value-field\": \"countryId\"\n    }\n  })], 1), _vm._v(\" \"), _c('sk-col', {\n    attrs: {\n      \"size\": 2\n    }\n  }, [_c('sk-select', {\n    attrs: {\n      \"value\": _vm.storeId,\n      \"bind\": _vm.queryDs,\n      \"null-title\": _vm.$t('wholeCountry'),\n      \"label\": _vm.$t('store'),\n      \"name\": \"storeId\",\n      \"display-field\": \"storeName\",\n      \"value-field\": \"storeId\",\n      \"option-bind\": _vm.storeDs\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('sk-row', [_c('sk-col', {\n    attrs: {\n      \"size\": 2\n    }\n  }, [_c('sk-select', {\n    attrs: {\n      \"option-bind\": _vm.bigCatalogDs,\n      \"display-field\": \"catalogName\",\n      \"value-field\": \"catalogId\",\n      \"label\": _vm.$t('category'),\n      \"name\": \"rootCatalogId\"\n    }\n  })], 1), _vm._v(\" \"), _c('sk-col', {\n    attrs: {\n      \"size\": 2\n    }\n  }, [_c('sk-select', {\n    attrs: {\n      \"label\": _vm.$t('subCategory'),\n      \"multiple\": false,\n      \"option-bind\": _vm.catalogDs,\n      \"value-field\": \"catalogId\",\n      \"display-field\": \"catalogName\",\n      \"name\": \"catalogId\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('sk-row', [_c('sk-col', {\n    attrs: {\n      \"size\": 2\n    }\n  }, [_c('sk-text-input', {\n    attrs: {\n      \"label\": _vm.$t('itemModel'),\n      \"name\": \"itemModel\"\n    }\n  })], 1), _vm._v(\" \"), _c('sk-col', {\n    attrs: {\n      \"size\": 2\n    }\n  }, [_c('sk-text-input', {\n    attrs: {\n      \"label\": _vm.$t('itemName'),\n      \"name\": \"itemName\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('sk-row', [_c('sk-col', {\n    attrs: {\n      \"size\": 1\n    }\n  }, [_c('div', {\n    staticClass: \"query-btn-con\",\n    staticStyle: {\n      \"margin-top\": \"20px\",\n      \"text-align\": \"right\"\n    }\n  }, [_c('sk-button', {\n    attrs: {\n      \"primary\": \"\",\n      \"label\": _vm.$t('query'),\n      \"action\": \"query\",\n      \"bind\": _vm.itemListDs\n    }\n  }), _vm._v(\" \"), _c('sk-button', {\n    attrs: {\n      \"action\": \"reset\",\n      \"label\": _vm.$t('clear')\n    }\n  })], 1)])], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('div', [_c('sk-table', {\n    ref: \"itemListTable\",\n    attrs: {\n      \"bind\": _vm.itemListDs,\n      \"show-checkbox\": _vm.canEdit\n    }\n  }, [_c('div', {\n    attrs: {\n      \"slot\": \"buttons\"\n    },\n    slot: \"buttons\"\n  }, [(_vm.isStore && _vm.canEdit) ? _c('sk-button', {\n    attrs: {\n      \"label\": _vm.$t('batchOnline'),\n      \"action\": \"patchOnline\",\n      \"primary\": \"\"\n    },\n    on: {\n      \"click\": _vm.itemListAction\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.isStore && _vm.canEdit) ? _c('sk-button', {\n    attrs: {\n      \"label\": _vm.$t('batchOffline'),\n      \"action\": \"patchOff\"\n    },\n    on: {\n      \"click\": _vm.itemListAction\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.isBrand && _vm.canEdit) ? _c('sk-button', {\n    attrs: {\n      \"primary\": \"\",\n      \"label\": _vm.$t('assignCountry'),\n      \"action\": \"assignCountry\"\n    },\n    on: {\n      \"click\": _vm.itemListAction\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.isCountry && _vm.canEdit) ? _c('sk-button', {\n    attrs: {\n      \"primary\": \"\",\n      \"label\": _vm.$t('assignStore'),\n      \"action\": \"assignStore\"\n    },\n    on: {\n      \"click\": _vm.itemListAction\n    }\n  }) : _vm._e(), _vm._v(\" \"), (!_vm.isStore && _vm.canEdit) ? _c('sk-button', {\n    attrs: {\n      \"label\": _vm.$t('cancelAssign'),\n      \"action\": \"cancelAssign\"\n    },\n    on: {\n      \"click\": _vm.itemListAction\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.canEdit) ? _c('sk-button', {\n    attrs: {\n      \"label\": _vm.$t('batchDelete'),\n      \"action\": \"patchDelete\"\n    },\n    on: {\n      \"click\": _vm.itemListAction\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.isStore && _vm.canEdit) ? _c('sk-button', {\n    attrs: {\n      \"primary\": \"\",\n      \"label\": _vm.$t('saveSort'),\n      \"action\": \"sortSave\"\n    },\n    on: {\n      \"click\": _vm.itemListAction\n    }\n  }) : _vm._e()], 1), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"slot\": \"row\"\n    },\n    slot: \"row\"\n  }, [_c('sk-column', {\n    attrs: {\n      \"name\": \"index\",\n      \"title\": _vm.$t('lineNo'),\n      \"width\": \"100px\",\n      \"align\": \"center\",\n      \"formatter\": _vm.renderIndex\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"name\": \"headAttacheList\",\n      \"view-type\": \"img\",\n      \"align\": \"center\",\n      \"title\": _vm.$t('thImg')\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"name\": \"itemId\",\n      \"title\": _vm.$t('itemModelName'),\n      \"formatter\": _vm.renderItemInfo,\n      \"align\": \"center\"\n    },\n    on: {\n      \"cell-click\": _vm.onClickOperationCell\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"name\": \"catalogMappingList\",\n      \"title\": _vm.$t('itemCategory'),\n      \"formatter\": _vm.renderCatalogs,\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"name\": \"itemTagMappings\",\n      \"title\": _vm.$t('itemTag'),\n      \"formatter\": _vm.renderItemTag,\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"name\": \"unit\",\n      \"title\": _vm.$t('currency'),\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"name\": \"factPrice\",\n      \"view-type\": \"money\",\n      \"title\": _vm.$t('price'),\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"name\": \"discountPrice\",\n      \"formatter\": _vm.formatYkPrice,\n      \"title\": _vm.$t('yaokPrice'),\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"if-hide\": !_vm.isBrand,\n      \"name\": \"assignCountryNum\",\n      \"title\": _vm.$t('assignCountryNum'),\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"if-hide\": _vm.isStore,\n      \"name\": \"assignStoryNum\",\n      \"title\": _vm.$t('assignStoreNum'),\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"if-hide\": _vm.isStore,\n      \"name\": \"onStoreNum\",\n      \"title\": _vm.$t('onlineStoreNum'),\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"if-hide\": !_vm.isStore,\n      \"name\": \"shelfFlag\",\n      \"title\": _vm.$t('status'),\n      \"formatter\": _vm.renderShelf,\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"if-hide\": !(_vm.isStore && _vm.canEdit),\n      \"name\": \"sort\",\n      \"editable\": \"\",\n      \"title\": _vm.$t('sortSet'),\n      \"align\": \"center\"\n    }\n  }), _vm._v(\" \"), _c('sk-column', {\n    attrs: {\n      \"if-hide\": !(_vm.canEdit),\n      \"align\": \"center\",\n      \"name\": \"action\",\n      \"title\": _vm.$t('operation'),\n      \"formatter\": _vm.renderOperation\n    },\n    on: {\n      \"cell-click\": _vm.onClickOperationCell\n    }\n  })], 1)])], 1)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-192fc20a\",\"hasScoped\":false}!./~/_vue-loader@12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/page/item/list.vue\n// module id = 1136\n// module chunks = 43","var Component = require(\"!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=script&index=0!./list.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-192fc20a\\\",\\\"hasScoped\\\":false}!../../../node_modules/_vue-loader@12.2.2@vue-loader/lib/selector?type=template&index=0!./list.vue\"),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/item/list.vue\n// module id = 695\n// module chunks = 43","import {createDataModule} from \"@/lib/dataModules/BaseDataCenter\"\n\nvar config = {\n    enumeration: {\n        baseInfoType: {\n            attr: \"ATTRIBUTE\", //属性\n            spec: \"SPEC\" //规格\n        }\n    },\n\n    //商品列表查询\n    getItems: {\n        url: \"/item/getItemsByQueryParams\",\n        paras: {\n            rootCatalogId: \"\",\n            countryId: 103000,\n            order: \"asc\",\n            offset: 0,\n            limit: 10,\n            storeId: \"\"\n        }\n    },\n    \n    getItemsForActivitySelect: {\n        url: \"/item/getItemsForActivitySelect\",\n        paras: {}\n    },\n\n    //删除商品\n    deleteByIds: {\n        url: \"/item/deleteByIds\",\n        event: \"\",\n        params: {\n            itemIds: \"itemIds\"\n        }\n    },\n\n    //上架\n    online: {\n        url: \"/item/changeToOnLine\",\n        event: \"\",\n        params: {\n            itemIds: \"itemIds\"\n        }\n    },\n\n    //下架\n    offline: {\n        url: \"/item/changeToOffLine\",\n        event: \"\",\n        params: {\n            itemIds: \"itemIds\"\n        }\n    },\n\n    //取消分配\n    cancelAssign: {\n        url: \"/item/assignCancel\",\n        event: \"\",\n        params: {\n            itemIds: \"itemIds\"\n        }\n    },\n\n    getItemsOrderBySort: {\n        url: \"/item/getItemsOrderBySort\",\n        event: \"\",\n        params: {\n            rootCatalogId: \"\",\n            catalogId: \"\"\n        }\n    },\n\n    //提交排序\n    batchUpdateItemSort: {\n        url: \"/item/batchUpdateItemSort\",\n        params: {\n            itemListString: \"\"\n        }\n    },\n\n    //获取商品基本属性 通过大类 商品上新用\n    getItemBaseInfo: {\n        url: \"/itemAttributeMaster/queryByTypeAndCatalogIdOrderBySort\",\n        params: {catalogId: \"\", type: \"\"}\n    },\n\n    //获取商品\n    getItemById: {\n        url: \"/item/getItemSaveOrInsert\",\n        event: \"\",\n        params: {\n            itemId: \"\"\n        }\n    },\n\n    //商品上新或者保存\n    maintain: {\n        url: \"/item/saveOrInsert\",\n        contentType: 'application/json',\n        params: {}\n    },\n\n    //查询分配国家的详情 itemIds\n    getAssignCountryDetail: {\n        url: \"/itemAssigned/getCountryTodoAssigned\",\n        params: {itemIds:\"\"}\n    },\n\n    //分配国家\n    assignCountry: {\n        contentType: \"json\",\n        url: \"/itemAssigned/countryAssigned\",\n        params: {}\n    },\n\n    //取消分配国家\n    unAssignCountry: {\n        contentType: \"json\",\n        url: \"/itemAssigned/countryUnAssigned\",\n        params: {}\n    },\n\n    //查询分配门店的详情\n    getAssignStoreDetail: {\n        url: \"/itemAssigned/getStoreTodoAssigned\",\n        itemIds:\"\"\n    },\n\n    //分配门店\n    assignStore: {\n        contentType: \"json\",\n        url: \"/itemAssigned/storeAssigned\",\n        params: {\n            hasShelfFlag: \"\",\n            itemList: \"\",\n            optStores: \"\"\n        }\n    },\n\n    //取消分配门店\n    unAssignStore: {\n        contentType: \"json\",\n        url: \"/itemAssigned/storeUnAssigned\",\n        params: {\n            hasShelfFlag: \"\",\n            itemList: \"\",\n            optStores: \"\"\n        }\n    },\n\n    //获取商品分配详情\n    getItemAssignDetail: {\n        url: \"/itemAssigned/getItemAssignsDetail\",\n        params: {itemId:''}\n    },\n\n    //取消商品分配到某个国家 countryItemId\n    cancelAssignOneCountry: {\n        url: \"/itemAssigned/unAssignedCountry\",\n        paras: {itemIds:\"\"}\n    }\n\n};\n\nexport default createDataModule(config, \"order\");\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/dataModules/item.js","<template>\n    <div class=\"main-container\">\n        <div>\n            <sk-data-set v-model=\"itemListDs\" :before-query=\"beforeRefreshItemTable\" :pagination=\"true\" page-size=\"10\" @load=\"onLoadItemList\" @update=\"onUpdateSort\" :auto-query=\"false\" :query-bind=\"queryDs\"\n                         :query-service=\"itemModule.getItems\"></sk-data-set>\n            \n            <sk-data-set auto-query @load=\"onLoadGradeInfoDs\" :query-service=\"baseData.getAccountGrade\"></sk-data-set>\n            <sk-data-set v-model=\"queryDs\" :auto-create=\"true\"></sk-data-set>\n\n            <sk-data-set v-model=\"bigCatalogDs\" :auto-query=\"true\"\n                         :query-service=\"baseData.getRootCatalogs\"></sk-data-set>\n            <sk-data-set v-model=\"catalogDs\" :auto-query=\"false\" :bind=\"queryDs\" bind-field=\"rootCatalogId\"\n                         bind-para-key=\"parentCatalogId\" :query-service=\"baseData.getCatalogsByParentId\"></sk-data-set>\n\n            <sk-data-set v-model=\"countriesDs\" auto-query :bind=\"queryDs\"\n                         :query-service=\"baseData.vendorCountries\"></sk-data-set>\n\n            <sk-data-set v-model=\"storeDs\" :auto-query=\"false\" :bind=\"queryDs\" bind-field=\"countryId\"\n                         :query-service=\"baseData.getStoreByCountry\"></sk-data-set>\n            \n        </div>\n\n        <div style=\"margin-top: 30px;\">\n            <sk-form :bind=\"queryDs\">\n                <sk-fold :title=\"$t('queryPara')\">\n                    <sk-row>\n                        <sk-col :size=\"2\">\n                            <sk-select :value=\"countryId\" :readonly=\"!!storeId\" :null-title=\"$t('global')\" :bind=\"queryDs\"\n                                       :label=\"$t('country')\" name=\"countryId\" :option-bind=\"countriesDs\"\n                                       display-field=\"countryName\" value-field=\"countryId\"></sk-select>\n                        </sk-col>\n                        <sk-col :size=\"2\">\n                            <sk-select :value=\"storeId\" :bind=\"queryDs\" :null-title=\"$t('wholeCountry')\" :label=\"$t('store')\" name=\"storeId\"\n                                       display-field=\"storeName\" value-field=\"storeId\" :option-bind=\"storeDs\"></sk-select>\n                        </sk-col>\n                    </sk-row>\n\n                    <sk-row>\n                        <sk-col :size=\"2\">\n                            <sk-select :option-bind=\"bigCatalogDs\" display-field=\"catalogName\" value-field=\"catalogId\"\n                                       :label=\"$t('category')\" name=\"rootCatalogId\"></sk-select>\n                        </sk-col>\n                        <sk-col :size=\"2\">\n                            <sk-select :label=\"$t('subCategory')\" :multiple=\"false\" :option-bind=\"catalogDs\" value-field=\"catalogId\"\n                                       display-field=\"catalogName\" name=\"catalogId\"></sk-select>\n                        </sk-col>\n                    </sk-row>\n\n                    <sk-row>\n                        <sk-col :size=\"2\">\n                            <sk-text-input :label=\"$t('itemModel')\" name=\"itemModel\"></sk-text-input>\n                        </sk-col>\n                        <sk-col :size=\"2\">\n                            <sk-text-input :label=\"$t('itemName')\" name=\"itemName\"></sk-text-input>\n                        </sk-col>\n                    </sk-row>\n\n                    <sk-row>\n                        <sk-col :size=\"1\">\n                            <div class=\"query-btn-con\" style=\"margin-top: 20px;text-align: right;\">\n                                <sk-button primary :label=\"$t('query')\" action=\"query\" :bind=\"itemListDs\"></sk-button>\n                                <sk-button action=\"reset\" :label=\"$t('clear')\"></sk-button>\n                            </div>\n                        </sk-col>\n                    </sk-row>\n                </sk-fold>\n            </sk-form>\n        </div>\n\n        <div>\n            <sk-table ref=\"itemListTable\" :bind=\"itemListDs\" :show-checkbox=\"canEdit\">\n                <div slot=\"buttons\">\n                    <sk-button v-if=\"isStore && canEdit\" :label=\"$t('batchOnline')\" action=\"patchOnline\" @click=\"itemListAction\" primary></sk-button>\n                    <sk-button v-if=\"isStore && canEdit\" :label=\"$t('batchOffline')\" action=\"patchOff\" @click=\"itemListAction\"></sk-button>\n\n                    <sk-button v-if=\"isBrand && canEdit\" primary :label=\"$t('assignCountry')\" action=\"assignCountry\" @click=\"itemListAction\"></sk-button>\n\n                    <sk-button v-if=\"isCountry && canEdit\" primary :label=\"$t('assignStore')\" action=\"assignStore\" @click=\"itemListAction\"></sk-button>\n                    <sk-button v-if=\"!isStore && canEdit\" :label=\"$t('cancelAssign')\" action=\"cancelAssign\" @click=\"itemListAction\"></sk-button>\n\n                    <sk-button v-if=\"canEdit\" :label=\"$t('batchDelete')\" action=\"patchDelete\" @click=\"itemListAction\"></sk-button>\n\n                    <sk-button v-if=\"isStore && canEdit\" primary :label=\"$t('saveSort')\" action=\"sortSave\" @click=\"itemListAction\"></sk-button>\n                </div>\n\n                <div slot=\"row\">\n                    <sk-column name=\"index\" :title=\"$t('lineNo')\" width=\"100px\" align=\"center\" :formatter=\"renderIndex\"></sk-column>\n                    <sk-column name=\"headAttacheList\" view-type=\"img\" align=\"center\" :title=\"$t('thImg')\"></sk-column>\n                    <sk-column name=\"itemId\" :title=\"$t('itemModelName')\" :formatter=\"renderItemInfo\" @cell-click=\"onClickOperationCell\" align=\"center\"></sk-column>\n                    <sk-column name=\"catalogMappingList\" :title=\"$t('itemCategory')\" :formatter=\"renderCatalogs\" align=\"center\"></sk-column>\n                    <sk-column name=\"itemTagMappings\" :title=\"$t('itemTag')\" :formatter=\"renderItemTag\" align=\"center\"></sk-column>\n                    <sk-column name=\"unit\" :title=\"$t('currency')\" align=\"center\"></sk-column>\n                    <sk-column name=\"factPrice\" view-type=\"money\" :title=\"$t('price')\" align=\"center\"></sk-column>\n                    <sk-column name=\"discountPrice\" :formatter=\"formatYkPrice\" :title=\"$t('yaokPrice')\" align=\"center\"></sk-column>\n                    <sk-column :if-hide=\"!isBrand\" name=\"assignCountryNum\" :title=\"$t('assignCountryNum')\" align=\"center\"></sk-column>\n                    <sk-column :if-hide=\"isStore\" name=\"assignStoryNum\" :title=\"$t('assignStoreNum')\" align=\"center\"></sk-column>\n                    <sk-column :if-hide=\"isStore\" name=\"onStoreNum\" :title=\"$t('onlineStoreNum')\" align=\"center\"></sk-column>\n                    <sk-column :if-hide=\"!isStore\" name=\"shelfFlag\" :title=\"$t('status')\" :formatter=\"renderShelf\" align=\"center\"></sk-column>\n                    <sk-column :if-hide=\"!(isStore && canEdit)\" name=\"sort\"  editable :title=\"$t('sortSet')\" align=\"center\"></sk-column>\n                    <sk-column :if-hide=\"!(canEdit)\" align=\"center\" name=\"action\" :title=\"$t('operation')\" :formatter=\"renderOperation\" @cell-click=\"onClickOperationCell\"></sk-column>\n                </div>\n            </sk-table>\n        </div>\n    </div>\n</template>\n\n\n<script type=\"text/javascript\">\n    import baseData from \"@/lib/dataModules/baseData\"\n    import itemModule from \"@/lib/dataModules/item\"\n    import ArrayApi from \"../../lib/utils/ArrayApi\"\n    import Money from \"@/lib/utils/money\"\n\n    export default{\n        data(){\n            window.test = this;\n\n            return {\n\n                ifHideOperation: true,\n\n                countryId: null, //国家id\n                storeId: null, //商店id\n\n                queryDs: null, //基本信息\n                itemListDs: null,\n\n                bigCatalogDs: null, //大类\n                catalogDs: null, //小类\n                countriesDs: null,\n                storeDs: null,\n\n                baseData,\n                itemModule,\n\n                queryType: \"brand\", //brand store country\n                gradeData: null, //权限数据\n                queryData: {}\n            };\n        },\n\n        computed: {\n            isCountry(){\n                return this.queryType === 'country';\n            },\n            isStore(){\n                return this.queryType === 'store';\n            },\n            isBrand(){\n                return this.queryType === 'brand';\n            },\n            canEdit(){\n                let gradeData = this.gradeData;\n                let queryData = this.queryData;\n                let queryType = this.queryType;\n\n                if (queryType && gradeData){\n                    //全球权限进来\n                    if (gradeData.hasBrandGlobal){\n                        return true;\n\n                    }else if (gradeData.hasCountry){\n\n                        //国家权限进来\n                        if (queryData.countryId == gradeData.countryId){\n                            return true;\n                        }\n                    }else if (queryData.storeId == gradeData.storeId){\n                            return true;\n                    }\n                }\n                return false;\n            }\n        },\n\n        methods: {\n            //渲染操作\n            renderOperation(v, index, record){\n                let isStore =  this.isStore;\n                let shelfFlag = record.getValue(\"shelfFlag\");\n\n                //无论如何都是可编辑的\n                let html = \"<a class='edit'>\" + this.$t('edit') + \"</a>\";\n\n                //是否采用门店作为查询条件\n                if (isStore){\n                    if (shelfFlag === 'OFFLINE') {\n                        //下架的状态才能上架\n                        html += \"<br><a class='online'>\" + this.$t('online') + \"</a>\";\n                    }else {\n                        html += \"<br><a class='offline'>\" + this.$t('offline') + \"</a>\";\n                    }\n\n                    //没有分配国家可以删除\n                    if (!(record.getValue(\"assignCountryNum\") > 0)){\n                        html += \"<br><a class='delete'>\" + this.$t('delete') + \"</a>\";\n                    }\n                }else{\n                    //如果国家地区条件查询 没有分配门店数即为可删除\n                    if (!((record.getValue(\"assignStoryNum\") > 0) || record.getValue(\"assignCountryNum\") > 0)){\n                        html += \"<br><a class='delete'>\" + this.$t('delete') + \"</a>\";\n                    }\n\n                    html += \"<br><a class='assignDetail'>\" + this.$t('assignDetail') + \"</a>\";\n                }\n                return html;\n            },\n\n            //渲染index\n            renderIndex(v, index){\n                return parseInt(index + 1);\n            },\n\n            renderCatalogs(v){\n                v = v || [];\n                return v.join(\" \") || '-'; //ArrayApi.getFieldValue(v, \"catalogName\", \" \");\n            },\n\n            // 渲染活动标签\n            renderItemTag(v){\n                if (!v){\n                    return this.$t('none');\n                }else {\n                    // v 循环给出itemTagMappings\n                    let str = '';\n                    v.forEach( item => {\n                        str += `${item.desc}<br>`;\n                    });\n                    return str;\n                }\n            },\n\n            formatYkPrice(v){\n                return !!v ? Money.format(v) : this.$t('none');\n            },\n\n            renderItemInfo(v, index, record){\n                let html = \"<div class='itemId'><a class='itemDetail'>\" + record.getValue(\"itemName\") + \"</a></div>\";\n                html += \"<div class='disabled-text'>\" + record.getValue(\"itemModel\") + \"</div>\";\n                return html;\n            },\n\n            renderShelf(v){\n                let html;\n                if (\"ONLINE\" === v){\n                    html = this.$t('onlineAlready');\n                }else{\n                    html = this.$t('offlineAlready');\n                }\n                return html;\n            },\n\n            onLoadItemList(){\n                let para = this.itemListDs.lastQueryPara, queryType;\n\n                if (para.storeId){\n                    queryType = \"store\";\n                }else if(para.countryId){\n                    queryType = \"country\";\n                }else{\n                    queryType = \"brand\";\n                }\n\n                this.queryType = queryType;\n                this.queryData = Object.assign({}, para);\n\n                this.resetItemListSort();\n            },\n\n            onClickOperationCell(e, value, name, index, record){\n                let actionType = e.target.className;\n\n                switch (actionType){\n                    case \"edit\":\n                        this.gotoEditItem(record);\n                        break;\n                    case \"delete\":\n                        this.deleteItem(record);\n                        break;\n                    case \"itemDetail\":\n                        this.gotoItemDetail(record);\n                        break;\n                    case \"assignDetail\":\n                        this.gotoAssignDetail(record);\n                        break;\n                    case \"online\":\n                        this.online(record);\n                        break;\n                    case \"offline\":\n                        this.offline(record);\n                        break;\n\n                }\n            },\n\n            /********************操作sort************************/\n            resetItemListSort(lastData){\n                let item, data, last;\n                let records = this.itemListDs.records || [];\n                for (let i = 0, l = records.length; i < l; i++) {\n                    item = records[i].getData();\n\n                    last = ArrayApi.getDataByAttr(lastData, \"itemId\", item.itemId);\n                    if (last && last[0]){\n                        item.oldSort = last[0].sort;\n                        records[i].setValue(\"sort\", item.oldSort);\n                    }else{\n                        item.oldSort = item.sort;\n                    }\n                }\n                return data;\n            },\n\n            onUpdateSort(value, key, record, ds){\n                if (key == \"sort\"){\n                    let records = ds.records, index = 0;\n                    for(let i = 0, l = records.length; i < l; i++){\n                        if (records[i] == record){\n                            index = i;\n                            break;\n                        }\n                    }\n                    //this.setItemListSort(index, parseInt(value), records);\n                }\n            },\n\n            //自动+10的排序 去除\n            setItemListSort(index, value, records){\n                let record, sort;\n                for(let i = index, l = records.length; i < l; i++){\n                    record = records[i];\n\n                    sort = parseInt(record.getValue(\"sort\"));\n                    if (sort < value){\n                        sort = value + 10;\n                        record.setValue(\"sort\", sort);\n                    }\n                }\n\n            },\n\n            //保存排序\n            saveItemListSort(data){\n                data = data || this.getSaveSortItemData();\n                if (data.length > 0){\n                    itemModule.batchUpdateItemSort.execute({\n                        data: {\n                            itemListString: JSON.stringify(data)\n                        },\n                        success: function () {\n                            this.$store.commit(\"message\", this.$t('saveSuccess'));\n                            this.resetItemListSort(data);\n                        }.bind(this)\n                    });\n                }\n            },\n\n            //获取可以保存的sort\n            getSaveSortItemData(ds){\n                ds = ds || this.itemListDs;\n                let data = ds.getAllData() || [];\n                let result = [], item;\n                for (let i = 0, l = data.length; i < l; i++) {\n                    item = data[i];\n                    if (item.oldSort != item.sort){\n                        result.push({\n                            sort: item.sort,\n                            itemId: item.itemId\n                        });\n                    }\n                }\n                return result;\n            },\n\n            beforeRefreshItemTable(ds){\n                let result = this.getSaveSortItemData(ds);\n\n                if (result.length > 0) {\n                    this.$store.commit(\"confirm\", {\n                        message: this.$t('haveAlterData'),\n                        ok: function () {\n                            this.saveItemListSort(result);\n                            result = null;\n                        }.bind(this)\n                    });\n                }\n                return true;\n            },\n\n            //加载账号级别 品牌 国家 门店\n            onLoadGradeInfoDs(records){\n                let data = this.gradeData = records[0].getData();\n                let para = {};\n                if (!data.hasBrandGlobal){\n                    para.countryId = data.countryId;\n                    if(data.hasCountry){\n                        this.countryId = data.countryId;\n                    }else if(data.hasStore){\n                        this.countryId = data.countryId || data.countryAuthList[0];\n                        this.storeId = data.storeId;\n                        para.storeId = data.storeId;\n                    }\n                }\n                this.itemListDs.query(para);\n            },\n\n            //上架\n            online(records){\n                //把records转化为数组\n                if (!(records instanceof Array)) {\n                    records = [records];\n                }\n\n                itemModule.online.execute({\n                    data: {\n                        itemIds: this.getIds(records).join(\",\")\n                    },\n                    mask: {\n                        info: this.$t(\"saving\")\n                    },\n                    success: function () {\n                        this.$store.commit(\"message\", this.$t('onlineSuccess'));\n                        this.itemListDs.updateRecordsData(records, {\n                            shelfFlag: \"ONLINE\"\n                        });\n                        records = null;\n                    }.bind(this)\n                });\n            },\n\n            //下架\n            offline(records){\n                //把records转化为数组\n                if (!(records instanceof Array)) {\n                    records = [records];\n                }\n\n                itemModule.offline.execute({\n                    data: {\n                        itemIds: this.getIds(records).join(\",\")\n                    },\n                    mask: {\n                        info: this.$t('saving')\n                    },\n                    success: function () {\n                        this.$store.commit(\"message\", this.$t('offlineSuccess'));\n                        this.itemListDs.updateRecordsData(records, {\n                            shelfFlag: \"OFFLINE\"\n                        });\n                        records = null;\n                    }.bind(this)\n                });\n            },\n\n            //删除商品\n            deleteItem(records) {\n                if (!(records instanceof Array)) {\n                    records = [records];\n                }\n                this.$store.commit(\"confirm\", {\n                    message: this.$t(\"DeleteNow\"),\n                    ok: function () {\n                      itemModule.deleteByIds.execute({\n                        data: {\n                          itemIds: this.getIds(records).join(\",\")\n                        },\n                        mask: {\n                          info: this.$t(\"saving\")\n                        },\n                        success: function () {\n                          this.itemListDs.delete(records);\n                          records = null;\n                        }.bind(this)\n                      });\n                    }.bind(this)\n                });\n            },\n\n            //取消分配\n            cancelAssign(records) {\n                if (!(records instanceof Array)) {\n                    records = [records];\n                }\n                itemModule.cancelAssign.execute({\n                    data: {\n                        itemIds: this.getIds(records).join(\",\")\n                    },\n                    mask: {\n                        info: this.$t(\"saving\")\n                    },\n                    success: function () {\n                        this.itemListDs.updateRecordsData(records, {\n                            assignCountryNum: \"0\",\n                            assignStoryNum: \"0\",\n                            onStoreNum: 0,\n                            shelfFlag: \"OFFLINE\"\n                        });\n                    }.bind(this)\n                });\n            },\n\n            //去分配国家\n            gotoAssignCountry(records){\n                this.$store.dispatch('router/push', {\n                    title: \"分配国家\",\n                    name: \"page.item.assignCountry\",\n                    query: {\n                        ids:this.getIds(records).join(\",\")\n                    }\n                });\n            },\n\n            //去分配门店\n            gotoAssignStore(records){\n                this.$store.dispatch('router/push', {\n                    title: \"分配门店\",\n                    name: \"page.item.assignStore\",\n                    query: {\n                        ids:this.getIds(records).join(\",\")\n                    }\n                });\n            },\n\n            //去查看分配详情\n            gotoAssignDetail(record){\n                this.$store.dispatch('router/push', {\n                    title: \"分配详情\",\n                    name: \"page.item.assignDetail\",\n                    query: {\n                        itemId: record.getValue(\"itemId\"),\n                        type: this.queryType,\n                        storeId: this.queryData.storeId,\n                        countryId: this.queryData.countryId\n                    }\n                });\n            },\n\n            //去编辑\n            gotoEditItem(record){\n                this.$store.dispatch('router/push', {\n                    title: \"商品编辑\",\n                    name: \"page.item.edit\",\n                    query: {\n                        itemId: record.getValue(\"itemId\")\n                    }\n                });\n            },\n\n            gotoItemDetail(record){\n                this.$store.dispatch('router/push', {\n                    title: \"商品详情\",\n                    name: \"page.item.detail\",\n                    query: {\n                        itemId: record.getValue(\"itemId\")\n                    }\n                });\n            },\n\n            /*********************action操作*************************/\n            itemListAction(action){\n                let records = this.itemListDs.getSelectedRecords();\n                switch (action) {\n                    case \"patchOff\":\n                        records = this.filterRecords(records, \"shelfFlag\", \"ONLINE\"); //过滤下架的数据\n                        if (records.length > 0) {\n                            this.offline(records);\n                        }\n                        break;\n\n                    case \"patchOnline\":\n                        records = this.filterRecords(records, \"shelfFlag\", \"OFFLINE\"); //过滤下架的数据\n                        if (records.length > 0) {\n                            this.online(records);\n                        }\n                        break;\n\n                    case \"assignCountry\":\n                        if (records.length > 0) {\n                            this.gotoAssignCountry(records);\n                        }\n                        break;\n\n                    case \"assignStore\":\n                        if (records.length > 0) {\n                            this.gotoAssignStore(records);\n                        }\n                        break;\n\n                    case \"cancelAssign\":\n                        if (records.length > 0) {\n                            this.cancelAssign(records);\n                        }\n                        break;\n\n                    case \"patchDelete\":\n                        if (records.length > 0) {\n                            this.deleteItem(records);\n                        }\n                        break;\n\n                    case \"sortSave\":\n                        this.saveItemListSort();\n                        break;\n                }\n\n                if (records.length > 0){\n                    this.$refs.itemListTable.selectAll(false);\n                }\n            },\n\n            //获取ids 用于更新\n            getIds(records){\n                let result = [];\n                for (let i = 0, l = records.length; i < l; i++) {\n                    result.push(records[i].getValue(\"itemId\"));\n                }\n                return result;\n            },\n\n            //过滤数据\n            filterRecords(records, key, value){\n                let result = [], record;\n                for (let i = 0, l = records.length; i < l; i++) {\n                    record = records[i];\n                    if (record.getValue(key) == value) {\n                        result.push(record);\n                    }\n                }\n                return result;\n            }\n        }\n    }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// list.vue?73e06850"],"sourceRoot":""}