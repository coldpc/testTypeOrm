webpackJsonp([15],{1143:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-activity"},[i("sk-data-set",{ref:"table1",attrs:{"auto-create":""},model:{value:t.queryDs,callback:function(e){t.queryDs=e},expression:"queryDs"}}),t._v(" "),i("sk-data-set",{ref:"table2",attrs:{"auto-create":""},model:{value:t.queryItemDs,callback:function(e){t.queryItemDs=e},expression:"queryItemDs"}}),t._v(" "),i("sk-data-set",{attrs:{"auto-query":!0,"query-service":t.baseData.getRootCatalogs},model:{value:t.bigCatalogDs,callback:function(e){t.bigCatalogDs=e},expression:"bigCatalogDs"}}),t._v(" "),i("sk-data-set",{attrs:{bind:t.queryItemDs,"bind-field":"rootCatalogId","bind-para-key":"parentCatalogId","query-service":t.baseData.getCatalogsByParentId},model:{value:t.catalogDs,callback:function(e){t.catalogDs=e},expression:"catalogDs"}}),t._v(" "),i("sk-data-set",{attrs:{"query-service":t.activity.getSkusByItemId},model:{value:t.skuDs,callback:function(e){t.skuDs=e},expression:"skuDs"}}),t._v(" "),i("sk-data-set",{attrs:{"query-bind":t.queryDs,"auto-query":"",pagination:"","page-size":"10",queryPara:t.queryItemConfig,"query-service":t.activity.findActivityItemDetail},model:{value:t.activityItemDs,callback:function(e){t.activityItemDs=e},expression:"activityItemDs"}}),t._v(" "),i("sk-data-set",{attrs:{"query-bind":t.queryItemDs,pagination:"","page-size":"10","query-service":t.activity.getItemsByQueryParams},model:{value:t.couldAddItems,callback:function(e){t.couldAddItems=e},expression:"couldAddItems"}}),t._v(" "),i("sk-fold",{attrs:{title:t.$t("activityEventInformation")}},[i("sk-row",{staticClass:"activity-info"},[i("sk-col",{attrs:{size:2}},[i("div",{staticClass:"info-con"},[i("span",{domProps:{innerHTML:t._s(t.$t("activityEventName"))}}),t._v(" "),i("span",[t._v(t._s(t.activityName))])])]),t._v(" "),i("sk-col",{attrs:{size:2}},[i("div",{staticClass:"info-con"},[i("span",{domProps:{innerHTML:t._s(t.$t("city"))}}),t._v(" "),i("span",[t._v(t._s(t.cityName))])])])],1),t._v(" "),i("sk-row",{staticClass:"activity-info"},[i("sk-col",{attrs:{size:2}},[i("div",{staticClass:"info-con"},[i("span",{domProps:{innerHTML:t._s(t.$t("address"))}}),t._v(" "),i("span",[t._v(t._s(t.address))])])]),t._v(" "),i("sk-col",{attrs:{size:2}},[i("div",{staticClass:"info-con"},[i("span",{domProps:{innerHTML:t._s(t.$t("activityEventPeriod"))}}),t._v(" "),i("span",[t._v(t._s(t._f("formatMsgTime")(t.startDate))+" ~ "+t._s(t._f("formatMsgTime")(t.endDate)))])])])],1)],1),t._v(" "),i("sk-fold",{attrs:{title:t.$t("activityAddedEventProducts")}},[i("sk-row",[i("sk-button",{attrs:{label:t.$t("batchDelete"),primary:""},on:{click:t.removeActivityItem}})],1),t._v(" "),i("sk-table",{ref:"relatedItems",attrs:{bind:t.activityItemDs,showCheckbox:""}},[i("div",{attrs:{slot:"row"},slot:"row"},[i("sk-column",{attrs:{name:"headAttacheList","view-type":"img",title:t.$t("thImg"),align:"center"}}),t._v(" "),i("sk-column",{attrs:{name:"itemName",formatter:t.forName,title:t.$t("productName"),align:"center"},on:{"cell-click":t.goItem}}),t._v(" "),i("sk-column",{attrs:{name:"itemModel",title:t.$t("productCode")}}),t._v(" "),i("sk-column",{attrs:{formatter:t.renderCategory,name:"catalogMappingList",title:t.$t("productCategory")}}),t._v(" "),i("sk-column",{attrs:{name:"unit",title:t.$t("currency"),align:"center"}}),t._v(" "),i("sk-column",{attrs:{name:"storePrice","view-type":"money",title:t.$t("price"),align:"center"}}),t._v(" "),i("sk-column",{attrs:{formatter:t.forOperate,name:"auditStatus",title:t.$t("operation"),align:"center"},on:{"cell-click":t.showSKU}})],1)])],1),t._v(" "),i("sk-fold",{attrs:{title:t.$t("activityAddEventProduct")}},[i("sk-form",{attrs:{bind:t.queryItemDs}},[i("sk-row",[i("sk-col",{attrs:{size:4}},[i("sk-select",{attrs:{label:t.$t("category"),bind:t.queryItemDs,"option-bind":t.bigCatalogDs,"display-field":"catalogName","value-field":"catalogId",name:"rootCatalogId"}})],1),t._v(" "),i("sk-col",{attrs:{size:4}},[i("sk-select",{attrs:{label:t.$t("subCategory"),bind:t.queryItemDs,"option-bind":t.catalogDs,"display-field":"catalogName","value-field":"catalogId",name:"catalogId"}})],1),t._v(" "),i("sk-col",{attrs:{size:4}},[i("sk-text-input",{attrs:{label:t.$t("productName"),name:"itemName"}})],1),t._v(" "),i("sk-col",{attrs:{size:4}},[i("sk-text-input",{attrs:{label:t.$t("productCode"),name:"itemModel"}})],1)],1),t._v(" "),i("sk-row",[i("sk-col",{attrs:{size:2}}),t._v(" "),i("sk-col",{staticStyle:{"text-align":"right"},attrs:{size:2}},[i("sk-button",{attrs:{label:t.$t("search"),bind:t.couldAddItems,action:"query",primary:""}}),t._v(" "),i("sk-button",{attrs:{label:t.$t("clear"),action:"reset"}})],1)],1),t._v(" "),i("sk-row",[i("sk-col",{attrs:{size:1}},[i("sk-button",{attrs:{label:t.$t("submit"),primary:""},on:{click:t.addActivityItem}})],1)],1)],1),t._v(" "),i("sk-table",{ref:"couldAddItemsTable",attrs:{bind:t.couldAddItems,showCheckbox:""}},[i("div",{attrs:{slot:"row"},slot:"row"},[i("sk-column",{attrs:{name:"headAttacheList","view-type":"img",title:t.$t("thImg"),align:"center"}}),t._v(" "),i("sk-column",{attrs:{name:"itemName",formatter:t.forName,title:t.$t("productName"),align:"center"},on:{"cell-click":t.goItem}}),t._v(" "),i("sk-column",{attrs:{name:"itemModel",title:t.$t("productCode")}}),t._v(" "),i("sk-column",{attrs:{formatter:t.renderCategory,name:"catalogMappingList",title:t.$t("productCategory")}}),t._v(" "),i("sk-column",{attrs:{name:"unit",title:t.$t("currency"),align:"center"}}),t._v(" "),i("sk-column",{attrs:{name:"storePrice","view-type":"money",title:t.$t("price"),align:"center"}}),t._v(" "),i("sk-column",{attrs:{formatter:t.forOperate,name:"auditStatus",title:t.$t("operation"),align:"center"},on:{"cell-click":t.showSKU}})],1)])],1),t._v(" "),i("sk-sku",{ref:"sku",attrs:{"query-service":t.activity.getSkusByItemId,countryName:t.countryName,activityName:t.activityName}})],1)},staticRenderFns:[]}},683:function(t,e,i){function a(t){i(989)}var s=i(0)(i(922),i(1143),a,"data-v-2dbda583",null);t.exports=s.exports},719:function(t,e,i){"use strict";var a=i(38),s={getStoreNodes:{url:"/store/getSubStoreNodes"},getStoreNodesWithActivityCount:{url:"/activity/getSubStoreNodesWithActivityCount"},getCurrentActivitysByStoreId:{url:"/activity/getCurrentActivitysByStoreId",params:{storeId:""}},deleteActivity:{url:"/activity/deleteActivity",params:{activityId:""}},saveOrUpdateActivity:{url:"/activity/saveOrUpdateActivity",contentType:"json",params:{activity:""}},getActivityList:{url:"/activity/getActivitiesByIds",params:{order:"asc",offset:0,limit:10,storeType:1}},getActivityById:{url:"/activity/getActivityById",params:{activityId:"activityId"}},getStoreByStoreId:{url:"/store/getStoreByStoreId",paras:{storeId:""}},findActivityItemDetail:{url:"/activity/findActivityItemDetail",params:{activityId:"storeId"}},getItemsByQueryParams:{url:"/item/getItemsByQueryParams",params:{storeId:"storeId",order:"asc",itemName:"itemName",itemModel:"itemModel"}},changeToOnLine:{url:"/activity/changeToOnLine",params:{activityIds:"activityIds"}},changeToOffLine:{url:"/activity/changeToOffLine",params:{activityIds:"activityIds"}},deleteByIds:{url:"/activity/deleteByIds",params:{activityIds:"activityIds"}},insertItem:{url:"/activity/saveActivityItems",params:{activityId:"",itemIds:""}},removeItem:{url:"/activity/deleteActivityItems",params:{activityId:"",itemIds:""}},getActivitySignList:{url:"/activitySign/getActivitySignListByActivityId",method:"get",params:{activityId:"activityId"}},getSkusByItemId:{url:"/sku/getSkusByItemId",params:{itemId:"itemId"}},getBenefitsByActivityId:{url:"/activity/getBenefitsByActivityId",params:{activityId:"activityId"}},saveActivityBenefitMappings:{contentType:"json",url:"/activity/saveActivityBenefitMappings",params:{activityId:"activityId"}},saveActivityItemMappings:{contentType:"json",url:"/activity/saveActivityItemMappings",params:{activityId:"activityId"}},getItemsByActivityId:{url:"/activity/getItemsByActivityId",params:{activityId:"activityId"}},getActivityStoreMappingsTreeByActivityId:{url:"/activity/getActivityStoreMappingsTreeByActivityId",params:{activityId:"activityId"}},saveActivityStoreMappings:{contentType:"json",url:"/activity/saveActivityStoreMappings",params:{activityId:"activityId"}},getBenefitArgProperties:{url:"/activity/getBenefitArgProperties",params:{benefitType:"benefitType"}},initQueryActivityDate:{url:"/activity/getActivityInitDateScope"}};e.a=i.i(a.a)(s,"activity")},799:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(10),s=i(719);e.default={name:"sk-sku",data:function(){return{ds:new a.a({queryService:s.a.getSkusByItemId,autoQuery:!1}),itemId:"",dataList:null,oldItemId:"none",unit:"",skuPrice:"",skuName:"",skuModel:"",itemName:""}},props:{countryName:{type:String},activityName:{type:String}},methods:{renderImg:function(t){if(t){return"<img src='"+t[0].path+"' style='width: 25%' />"}return"未找到图片"},show:function(t,e){var i=this.ds;this.oldItemId!=t&&(i.query({itemId:t}),this.oldItemId=t),this.$refs.modal.show(),this.itemName=e},hide:function(){this.$refs.modal.hide()}},created:function(){var t=this.ds;t.addEventListener(t.event.load,function(t,e){this.dataList=t[0].data,this.unit=this.dataList.unit,this.skuPrice=this.dataList.skuPrice,this.skuName=this.dataList.skuName,this.skuModel=this.dataList.skuModel}.bind(this))},filters:{formatMoney:function(t){t=t||"";var e=parseFloat(t);if(!e&&0!==e)return t;e=parseFloat((e+"").replace(/[^\d\.-]/g,"")).toFixed(2)+"";for(var i=e.split(".")[0].split("").reverse(),a=e.split(".")[1],s="",r=0;r<i.length;r++)s+=i[r]+((r+1)%3==0&&r+1!=i.length?",":"");return s.split("").reverse().join("")+"."+a}}}},802:function(t,e,i){e=t.exports=i(1)(!0),e.push([t.i,".info-con[data-v-1c0153cc]{line-height:2;display:table}.info-con span[data-v-1c0153cc]:first-child{font-weight:700;width:80px;margin-left:10px;display:table-cell}","",{version:3,sources:["F:/project/vueMuseUI-master/src/components/skirt/SkuDetail.vue"],names:[],mappings:"AACA,2BACE,cAAe,AACf,aAAe,CAChB,AACD,4CACE,gBAAiB,AACjB,WAAY,AACZ,iBAAkB,AAClB,kBAAoB,CACrB",file:"SkuDetail.vue",sourcesContent:["\n.info-con[data-v-1c0153cc] {\n  line-height: 2;\n  display: table;\n}\n.info-con span[data-v-1c0153cc]:first-child {\n  font-weight: 700;\n  width: 80px;\n  margin-left: 10px;\n  display: table-cell;\n}\n"],sourceRoot:""}])},807:function(t,e,i){var a=i(802);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(2)("8089138c",a,!0,{})},815:function(t,e,i){function a(t){i(807)}var s=i(0)(i(799),i(817),a,"data-v-1c0153cc",null);t.exports=s.exports},817:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sku-detail"},[i("sk-win",{ref:"modal",attrs:{title:t.$t("skuDetail"),scrollable:!0,height:"100%"}},[i("div",{staticClass:"modal-wrapper"},[i("div",{staticClass:"skuRow"},[i("sk-row",{staticClass:"sku-info"},[i("sk-col",{attrs:{size:2}},[i("div",{staticClass:"info-con"},[i("span",{domProps:{innerHTML:t._s(this.$t("countryArea"))}}),t._v(" "),i("span",[t._v(t._s(t.countryName))])])]),t._v(" "),i("sk-col",{attrs:{size:2}},[i("div",{staticClass:"info-con"},[i("span",{domProps:{innerHTML:t._s(this.$t("Currency"))}}),t._v(" "),i("span",[t._v(t._s(t.unit))])])])],1),t._v(" "),i("sk-row",{staticClass:"sku-info"},[i("sk-col",{attrs:{size:2}},[i("div",{staticClass:"info-con"},[i("span",{domProps:{innerHTML:t._s(this.$t("activityStoreEventName"))}}),t._v(" "),i("span",[t._v(t._s(t.activityName))])])]),t._v(" "),i("sk-col",{attrs:{size:2}},[i("div",{staticClass:"info-con"},[i("span",{domProps:{innerHTML:t._s(this.$t("itemPrice"))}}),t._v(" "),i("span",[t._v(t._s(t._f("formatMoney")(t.skuPrice)))])])])],1),t._v(" "),i("sk-row",{staticClass:"sku-info"},[i("sk-col",{attrs:{size:2}},[i("div",{staticClass:"info-con"},[i("span",{domProps:{innerHTML:t._s(t.$t("productName"))}}),t._v(" "),i("span",[t._v(t._s(t.itemName))])])]),t._v(" "),i("sk-col",{attrs:{size:2}},[i("div",{staticClass:"info-con"},[i("span",{domProps:{innerHTML:t._s(t.$t("productCode"))}}),t._v(" "),i("span",[t._v(t._s(t.skuModel))])])])],1)],1),t._v(" "),i("sk-table",{attrs:{bind:t.ds}},[i("div",{attrs:{slot:"row"},slot:"row"},[i("sk-column",{attrs:{name:"skuName",title:t.$t("SizeColor"),align:"center"}}),t._v(" "),i("sk-column",{attrs:{name:"skuPrice","view-type":"money",title:t.$t("price"),align:"center"}}),t._v(" "),i("sk-column",{attrs:{name:"headAttachList","view-type":"img",title:t.$t("thImg"),align:"center"}})],1)])],1)])],1)},staticRenderFns:[]}},922:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(129),s=i(719),r=i(815),n=i.n(r);i(14).a.component(n.a.name,n.a),e.default={data:function(){return window.test=this,{activity:s.a,baseData:a.a,queryDs:null,queryItemDs:null,activityItemDs:null,bigCatalogDs:null,catalogDs:null,skuDs:null,couldAddItems:null,countryName:"",activityName:"",cityName:"",address:"",startDate:"",endDate:"",itemName:"",itemModel:"",storePrice:"",unit:"",queryItemConfig:{}}},methods:{renderCategory:function(t){for(var e="",i=0;i<t.length;i++)e+=t[i].catalogName+" ";return e},forOperate:function(t){return"<a class='show-SKU' title=''>"+this.$t("skuDetail")+"</a>"},forName:function(t,e,i){return"<a class='goItem' itemId='"+i.getValue("itemId")+"' title=''>"+t+"</a>"},goItem:function(t,e,i,a,s){this.$store.dispatch("router/push",{title:"商品编辑",name:"page.item.maintain",query:{type:"detail",itemId:s.getValue("itemId")}})},addActivityItem:function(){for(var t=this.$refs.couldAddItemsTable.getSelectData(),e=[],i="",a=0;a<t.length;a++)e.push(t[a].itemId);if(0==e.length)return void this.$store.commit("message",this.$t("noItemTrip"));i=e.join(","),this.$store.commit("confirm",{message:this.$t("iSsubmit"),ok:function(){s.a.insertItem.execute({data:{activityId:this.$route.query.activityId,itemIds:i},success:function(t){this.$base.message("添加成功"),this.$refs.couldAddItemsTable.selectAll(!1),this.activityItemDs.query()}.bind(this)})}.bind(this)})},removeActivityItem:function(){for(var t=this.$refs.relatedItems.getSelectData(),e=[],i="",a=0;a<t.length;a++)e.push(t[a].itemId);if(0===e.length)return void this.$store.commit("message",this.$t("noItemTrip"));i=e.join(","),this.$store.commit("confirm",{message:this.$t("DeleteNow"),ok:function(){s.a.removeItem.execute({data:{activityId:this.$route.query.activityId,itemIds:i},success:function(t){this.$base.message("删除成功"),this.$refs.relatedItems.selectAll(!1),this.activityItemDs.query()}.bind(this)})}.bind(this)})},showSKU:function(t,e,i,a,s){var r=s.getValue("itemId"),n=s.getValue("itemName");this.$refs.sku.show(r,n)}},created:function(){this.queryItemConfig={activityId:this.$route.query.activityId},s.a.getActivityByActivityId.execute({data:{activityId:this.$route.query.activityId},success:function(t){this.countryName=t.country.countryName,this.activityName=t.activityName,this.cityName=t.country.countryName+" "+t.country.enName,this.address=t.activityAddress,this.startDate=t.beginTime,this.endDate=t.endTime,this.couldAddItems.queryPara={storeId:t.storeId,countryId:t.city.countryId},this.couldAddItems.query({storeId:t.storeId})}.bind(this),failed:function(t){this.$base.message(t)}.bind(this)})},filters:{formatMsgTime:function(t){var t=new Date(t),e=t.getFullYear(),i=t.getMonth()+1,a=t.getDate(),s=t.getHours(),r=t.getMinutes(),n=t.getSeconds();return i=i<10?"0"+i:i,a=a<10?"0"+a:a,s=s<10?"0"+s:s,r=r<10?"0"+r:r,n=n<10?"0"+n:n,e+"-"+i+"-"+a}}}},967:function(t,e,i){e=t.exports=i(1)(!0),e.push([t.i,".activity-info[data-v-2dbda583]{padding:20px 0}.activity-info .info-con span[data-v-2dbda583]:first-child{width:100px;display:inline-block}.modal-wrapper .skuRow[data-v-2dbda583]{border-bottom:1px solid #ccc;padding-bottom:10px}.sku-info span[data-v-2dbda583]:first-child{display:inline-block;width:70px}","",{version:3,sources:["F:/project/vueMuseUI-master/src/page/activity/addItem.vue"],names:[],mappings:"AACA,gCACE,cAAgB,CACjB,AACD,2DACE,YAAa,AACb,oBAAsB,CACvB,AAID,wCACE,6BAA8B,AAC9B,mBAAqB,CACtB,AACD,4CACE,qBAAsB,AACtB,UAAY,CACb",file:"addItem.vue",sourcesContent:["\n.activity-info[data-v-2dbda583] {\n  padding: 20px 0;\n}\n.activity-info .info-con span[data-v-2dbda583]:first-child {\n  width: 100px;\n  display: inline-block;\n}\n.activity-info .info-con span[data-v-2dbda583]:last-child {\n  /*font-weight: bold;*/\n}\n.modal-wrapper .skuRow[data-v-2dbda583] {\n  border-bottom: 1px solid #ccc;\n  padding-bottom: 10px;\n}\n.sku-info span[data-v-2dbda583]:first-child {\n  display: inline-block;\n  width: 70px;\n}\n"],sourceRoot:""}])},989:function(t,e,i){var a=i(967);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(2)("9aba3506",a,!0,{})}});
//# sourceMappingURL=15.8e69281dcfa00e737dcd.js.map