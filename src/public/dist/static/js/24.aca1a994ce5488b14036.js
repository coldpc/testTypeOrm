webpackJsonp([24],{1002:function(t,e,s){var a=s(980);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s(2)("7c95d549",a,!0,{})},1129:function(t,e,s){function a(t){s(1002)}var i=s(0)(s(937),s(1168),a,"data-v-9f35942a",null);t.exports=i.exports},1168:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main-container"},[s("div",{staticClass:"data-sets-con"},[s("sk-data-set",{attrs:{"query-para":{itemIds:this.ids},"query-mask":{info:"加载中..."},"query-service":t.itemModule.getAssignCountryDetail,"auto-query":""},on:{load:t.loadAssignDetail}}),t._v(" "),s("sk-data-set",{attrs:{"query-service":t.baseData.getCurrencyList,"auto-query":""},model:{value:t.currencyDs,callback:function(e){t.currencyDs=e},expression:"currencyDs"}}),t._v(" "),s("sk-data-set",{model:{value:t.chooseCountriesDs,callback:function(e){t.chooseCountriesDs=e},expression:"chooseCountriesDs"}}),t._v(" "),s("sk-data-set",{model:{value:t.todoCountriesDs,callback:function(e){t.todoCountriesDs=e},expression:"todoCountriesDs"}}),t._v(" "),s("sk-data-set",{on:{ready:t.onItemsDsReady},model:{value:t.todoItemsDs,callback:function(e){t.todoItemsDs=e},expression:"todoItemsDs"}}),t._v(" "),s("sk-data-set",{model:{value:t.skuEditDs,callback:function(e){t.skuEditDs=e},expression:"skuEditDs"}})],1),t._v(" "),s("sk-fold",{attrs:{title:t.$t("assignItemsToCountryArea")}},[s("div",{staticClass:"checked-part"},[s("sk-checkbox",{attrs:{label:t.$t("assignCountryMeanwhile")},model:{value:t.hasAssignedToStore,callback:function(e){t.hasAssignedToStore=e},expression:"hasAssignedToStore"}}),t._v(" "),s("sk-checkbox",{attrs:{label:t.$t("onlineItemMeanwhile")},model:{value:t.hasShelfFlag,callback:function(e){t.hasShelfFlag=e},expression:"hasShelfFlag"}})],1),t._v(" "),s("sk-row",[s("sk-col",{attrs:{width:"40"}},[s("sk-table",{ref:"todoCountryTable",attrs:{bind:t.todoCountriesDs,"show-checkbox":""}},[s("div",{attrs:{slot:"row"},slot:"row"},[s("sk-column",{attrs:{align:"center",name:"countryName",width:"25%",title:t.$t("tobeAssignCountry")}})],1)])],1),t._v(" "),s("sk-col",{attrs:{width:"20"}},[s("div",{staticClass:"assign-btn-con"},[s("sk-button",{attrs:{icon:"arrow_forward"},on:{click:t.assignCountry}})],1),t._v(" "),s("div",{staticClass:"assign-btn-con"},[s("sk-button",{attrs:{icon:"arrow_back"},on:{click:t.removeAssign}})],1)]),t._v(" "),s("sk-col",{attrs:{width:"40"}},[s("sk-table",{ref:"chooseCountryTable",attrs:{bind:t.chooseCountriesDs,"show-checkbox":""}},[s("div",{attrs:{slot:"row"},slot:"row"},[s("sk-column",{attrs:{align:"center",name:"countryName",width:"25%",title:t.$t("alreadyAssignCountry")}})],1)])],1)],1)],1),t._v(" "),s("sk-fold",{attrs:{title:t.$t("tobeAssignItems")}},[s("sk-table",{ref:"todoItemsTable",attrs:{"show-line-number":"",bind:t.todoItemsDs,"show-checkbox":""}},[s("div",{attrs:{slot:"row"},slot:"row"},[s("sk-column",{attrs:{align:"center",name:"headAttacheList",width:"100px","view-type":"img",title:t.$t("thImg")}}),t._v(" "),s("sk-column",{attrs:{align:"center",name:"itemName",title:t.$t("itemName")}}),t._v(" "),s("sk-column",{attrs:{align:"center",name:"itemModel",title:t.$t("itemModel")}}),t._v(" "),s("sk-column",{attrs:{align:"center",name:"catalogMappingList",title:t.$t("subCategory"),formatter:t.renderCatalog}}),t._v(" "),s("sk-column",{attrs:{align:"center",width:"150px",name:"unit",editable:"","edit-type":"select","option-bind":t.currencyDs,"display-field":"exchangeUnit","value-field":"exchangeUnit",title:t.$t("currency")}}),t._v(" "),s("sk-column",{attrs:{align:"center",name:"storePrice",editable:"","edit-type":"money",title:t.$t("price")}}),t._v(" "),s("sk-column",{attrs:{align:"center",name:"skuList",title:t.$t("skuSet"),formatter:t.renderSkuEdit},on:{"cell-click":t.onClickEditSku}})],1)])],1),t._v(" "),s("sk-win",{ref:"editSkuWin",attrs:{title:t.$t("skuDetail"),width:"80%"}},[s("div",[s("div",{staticClass:"item-info-list"},[s("div",{staticClass:"info"},[s("label",{staticClass:"prompt"},[t._v(t._s(t.$t("country"))+"：")]),t._v(" "),s("span",[t._v(t._s(t.skuData.countryName||t.$t("noData")))])]),t._v(" "),s("div",{staticClass:"info"},[s("label",{staticClass:"prompt"},[t._v(t._s(t.$t("itemName"))+"：")]),t._v(" "),s("span",[t._v(t._s(t.skuData.itemName))])]),t._v(" "),s("div",{staticClass:"info"},[s("label",{staticClass:"prompt"},[t._v(t._s(t.$t("itemModel"))+"：")]),t._v(" "),s("span",[t._v(t._s(t.skuData.itemModel))])]),t._v(" "),s("div",{staticClass:"info"},[s("label",{staticClass:"prompt"},[t._v(t._s(t.$t("currency"))+"：")]),t._v(" "),s("span",[t._v(t._s(t.skuData.unit))])]),t._v(" "),s("div",{staticClass:"info"},[s("label",{staticClass:"prompt"},[t._v(t._s(t.$t("price"))+"：")]),t._v(" "),s("span",[t._v(t._s(t.skuData.storePrice))])])])]),t._v(" "),s("div",{staticClass:"edit-sku-div",style:{maxHeight:t.countHeight}},[s("sk-table",{attrs:{bind:t.skuEditDs}},[s("div",{attrs:{slot:"row"},slot:"row"},[s("sk-column",{attrs:{align:"center",name:"skuName",title:t.$t("skuName")}}),t._v(" "),s("sk-column",{attrs:{align:"center",name:"skuModel",title:t.$t("itemModel")}}),t._v(" "),s("sk-column",{attrs:{align:"center",width:"150px",name:"unit",editable:"","edit-type":"select","option-bind":t.currencyDs,"display-field":"exchangeUnit","value-field":"exchangeUnit",title:t.$t("currency")}}),t._v(" "),s("sk-column",{attrs:{align:"center",name:"skuPrice",editable:"","edit-type":"money",title:t.$t("price")}}),t._v(" "),s("sk-column",{attrs:{align:"center",name:"headAttachList",width:"100px","view-type":"img",title:t.$t("thImg")}})],1)])],1)])],1)},staticRenderFns:[]}},1172:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("sk-reload",{attrs:{name:"page.item.assignCountry"}},[s("sk-assign-country",{attrs:{editable:!0}})],1)},staticRenderFns:[]}},689:function(t,e,s){var a=s(0)(s(929),s(1172),null,null,null);t.exports=a.exports},718:function(t,e,s){"use strict";var a=s(38),i={enumeration:{baseInfoType:{attr:"ATTRIBUTE",spec:"SPEC"}},getItems:{url:"/item/getItemsByQueryParams",paras:{rootCatalogId:"",countryId:103e3,order:"asc",offset:0,limit:10,storeId:""}},getItemsForActivitySelect:{url:"/item/getItemsForActivitySelect",paras:{}},deleteByIds:{url:"/item/deleteByIds",event:"",params:{itemIds:"itemIds"}},online:{url:"/item/changeToOnLine",event:"",params:{itemIds:"itemIds"}},offline:{url:"/item/changeToOffLine",event:"",params:{itemIds:"itemIds"}},cancelAssign:{url:"/item/assignCancel",event:"",params:{itemIds:"itemIds"}},getItemsOrderBySort:{url:"/item/getItemsOrderBySort",event:"",params:{rootCatalogId:"",catalogId:""}},batchUpdateItemSort:{url:"/item/batchUpdateItemSort",params:{itemListString:""}},getItemBaseInfo:{url:"/itemAttributeMaster/queryByTypeAndCatalogIdOrderBySort",params:{catalogId:"",type:""}},getItemById:{url:"/item/getItemSaveOrInsert",event:"",params:{itemId:""}},maintain:{url:"/item/saveOrInsert",contentType:"application/json",params:{}},getAssignCountryDetail:{url:"/itemAssigned/getCountryTodoAssigned",params:{itemIds:""}},assignCountry:{contentType:"json",url:"/itemAssigned/countryAssigned",params:{}},unAssignCountry:{contentType:"json",url:"/itemAssigned/countryUnAssigned",params:{}},getAssignStoreDetail:{url:"/itemAssigned/getStoreTodoAssigned",itemIds:""},assignStore:{contentType:"json",url:"/itemAssigned/storeAssigned",params:{hasShelfFlag:"",itemList:"",optStores:""}},unAssignStore:{contentType:"json",url:"/itemAssigned/storeUnAssigned",params:{hasShelfFlag:"",itemList:"",optStores:""}},getItemAssignDetail:{url:"/itemAssigned/getItemAssignsDetail",params:{itemId:""}},cancelAssignOneCountry:{url:"/itemAssigned/unAssignedCountry",paras:{itemIds:""}}};e.a=s.i(a.a)(i,"order")},929:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(1129),i=s.n(a);e.default={components:{"sk-assign-country":i.a},data:function(){return{}}}},937:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(129),i=s(718),n=s(39);e.default={data:function(){return window.test=this,{hasAssignedToStore:!0,hasShelfFlag:!0,chooseCountriesDs:null,todoCountriesDs:null,todoItemsDs:null,currencyDs:null,skuEditDs:null,countHeight:"400px",ids:this.$route.query.ids,skuData:{},itemModule:i.a,baseData:a.a}},created:function(){},methods:{renderSkuEdit:function(){return"<a class='edit-sku'>"+this.$t("skuDetail")+"</a>"},renderCatalog:function(t){return n.a.getFieldValue(t,"catalogName",",")},onClickEditSku:function(t,e,s,a,i){"edit-sku"==t.target.className&&(this.skuEditDs.setData(e),this.$refs.editSkuWin.show(),this.skuData=i.getData())},onItemsDsReady:function(t){t.addEventListener(t.event.update,this.updateSkuValue)},updateSkuValue:function(t,e,s){var a;"storePrice"==e?a="skuPrice":"unit"==e&&(a="unit");for(var i=s.getData().skuList,n=0,o=i.length;n<o;n++)i[n][a]=t},loadAssignDetail:function(t){var e=t[0].getData();this.chooseCountriesDs.setData(e.chooseCountries),this.todoCountriesDs.setData(e.toDoCountries),this.todoItemsDs.setData(e.itemList)},assignCountry:function(){var t=this.todoCountriesDs.getSelectedData();t&&0!=t.length&&i.a.assignCountry.execute({data:{hasShelfFlag:this.hasShelfFlag,hasAssignedToStore:this.hasAssignedToStore,optCountries:n.a.getFieldsValue(t,"countryId"),itemList:this.getAssignSubmitData()},mask:{info:""},success:function(){var t=this.todoCountriesDs.delete();this.chooseCountriesDs.addMultiple(this.chooseCountriesDs.getRecordsData(t))}.bind(this)})},removeAssign:function(){var t=this.chooseCountriesDs.getSelectedData();t&&0!=t.length&&i.a.unAssignCountry.execute({data:{hasShelfFlag:this.hasShelfFlag,hasAssignedToStore:this.hasAssignedToStore,optCountries:n.a.getFieldsValue(t,"countryId"),itemList:this.getAssignSubmitData()},mask:{info:""},success:function(){var t=this.chooseCountriesDs.delete();this.todoCountriesDs.addMultiple(this.todoCountriesDs.getRecordsData(t))}.bind(this)})},getAssignSubmitData:function(){var t,e=this.$base.deepCopy(this.todoItemsDs.getAllData());e=n.a.getFieldsValue(e,["skuList","itemId","storePrice","unit"]);for(var s=0,a=e.length;s<a;s++)t=e[s].skuList,e[s].skuList=n.a.getFieldsValue(t,["skuId","itemId","skuPrice","unit"]);return e}}}},980:function(t,e,s){e=t.exports=s(1)(!0),e.push([t.i,".assign-btn-con[data-v-9f35942a]{text-align:center;margin-top:10px}.assign-btn-con+.assign-btn-con[data-v-9f35942a]{margin-top:20px}.item-info-list[data-v-9f35942a]{overflow:hidden;color:#999}.item-info-list .info[data-v-9f35942a]{float:left}.item-info-list .info+.info[data-v-9f35942a]{margin-left:20px}.item-info-list .info .prompt[data-v-9f35942a]{color:#aaa}.edit-sku-div[data-v-9f35942a]{overflow-y:auto;overflow-x:hidden}","",{version:3,sources:["F:/project/vueMuseUI-master/src/page/item/plugins/assignCountry.vue"],names:[],mappings:"AACA,iCACE,kBAAmB,AACnB,eAAiB,CAClB,AACD,iDACE,eAAiB,CAClB,AACD,iCACE,gBAAiB,AACjB,UAAY,CACb,AACD,uCACE,UAAY,CACb,AACD,6CACE,gBAAkB,CACnB,AACD,+CACE,UAAY,CACb,AACD,+BACE,gBAAiB,AACjB,iBAAmB,CACpB",file:"assignCountry.vue",sourcesContent:["\n.assign-btn-con[data-v-9f35942a] {\n  text-align: center;\n  margin-top: 10px;\n}\n.assign-btn-con + .assign-btn-con[data-v-9f35942a] {\n  margin-top: 20px;\n}\n.item-info-list[data-v-9f35942a] {\n  overflow: hidden;\n  color: #999;\n}\n.item-info-list .info[data-v-9f35942a] {\n  float: left;\n}\n.item-info-list .info + .info[data-v-9f35942a] {\n  margin-left: 20px;\n}\n.item-info-list .info .prompt[data-v-9f35942a] {\n  color: #aaa;\n}\n.edit-sku-div[data-v-9f35942a] {\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=24.aca1a994ce5488b14036.js.map