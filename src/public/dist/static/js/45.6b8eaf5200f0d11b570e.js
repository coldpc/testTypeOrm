webpackJsonp([45],{1146:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-container"},[a("sk-data-set",{attrs:{"data-source":e.brandInfo,"auto-query":""},model:{value:e.queryDs,callback:function(t){e.queryDs=t},expression:"queryDs"}}),e._v(" "),a("sk-data-set",{attrs:{"auto-query":"","query-service":e.baseData.getAccountGrade},on:{load:e.onLoadGradeInfoDs}}),e._v(" "),a("sk-fold",{attrs:{title:e.$t("baseInfo")}},[a("sk-form",{attrs:{bind:e.queryDs}},[a("sk-row",[a("sk-col",{attrs:{size:3}},[a("sk-text-input",{attrs:{value:"",label:e.$t("brandName"),bind:e.queryDs,name:"brandName",readonly:""}})],1),e._v(" "),a("sk-col",{attrs:{size:3}},[a("sk-text-input",{attrs:{value:"",label:e.$t("chineseName"),bind:e.queryDs,name:"brandCname",readonly:""}})],1),e._v(" "),a("sk-col",{attrs:{size:3}},[a("sk-text-input",{attrs:{value:"",label:e.$t("brandEmail"),bind:e.queryDs,name:"email",readonly:!e.hasBrand,required:""}})],1)],1),e._v(" "),a("sk-row",[a("sk-col",{attrs:{size:3}},[a("sk-text-input",{attrs:{value:"",label:e.$t("contact"),bind:e.queryDs,name:"contact",required:"",readonly:!e.hasBrand}})],1),e._v(" "),a("sk-col",{attrs:{size:1.5}},[a("sk-text-input",{attrs:{value:"",label:e.$t("phoneNumber"),bind:e.queryDs,name:"tel",required:"",readonly:!e.hasBrand}})],1)],1),e._v(" "),a("sk-row",[a("sk-col",{attrs:{size:1}},[a("sk-text-input",{attrs:{value:"",label:e.$t("介绍文案"),bind:e.queryDs,name:"descDocu",required:"",readonly:!e.hasBrand}})],1)],1),e._v(" "),a("sk-row",[a("sk-col",{attrs:{size:1}},[a("sk-attach",{ref:"headAssignAtta",attrs:{required:"",label:e.$t("头图"),readonly:!e.hasBrand,"file-size-limit":2,name:"headAssignId",attachType:"IMG",source:"USER","max-files":1,"row-num":2},on:{"assign-id-updated":e.uploadSuccessPic}})],1),e._v(" "),a("sk-col",{attrs:{size:1}},[a("sk-attach",{ref:"headAtta",attrs:{required:"",label:e.$t("logo"),readonly:!e.hasBrand,"file-size-limit":2,name:"picAssignId",attachType:"IMG",source:"USER","max-files":1,"row-num":2},on:{"assign-id-updated":e.uploadSuccessPic}})],1),e._v(" "),a("sk-col",{attrs:{size:1}},[a("sk-attach",{ref:"bodyAtta",attrs:{required:"",label:e.$t("detailedPictures"),readonly:!e.hasBrand,name:"bodyAssignId",attachType:"IMG",source:"USER","max-files":1,"row-num":2,"file-size-limit":2},on:{"assign-id-updated":e.uploadSuccessBody}})],1),e._v(" "),a("sk-col",{attrs:{size:1}},[a("sk-attach",{ref:"mainBusinessAtta",attrs:{required:"",label:e.$t("主营业务图"),readonly:!e.hasBrand,name:"mainBusinessAssignId",attachType:"IMG",source:"USER","max-files":1,"row-num":2,"file-size-limit":2},on:{"assign-id-updated":e.uploadSuccessBody}})],1),e._v(" "),a("sk-col",{attrs:{size:1}},[a("sk-attach",{ref:"videoPicAttach",attrs:{readonly:!e.hasBrand,"attach-type":"VIDEO",source:"USER",height:200,width:350,"max-files":1,"row-num":2,label:e.$t("video"),remark:e.$t("itemVideoRemark",{size:"50"}),name:"bodyVideoAssignId",accept:"video/mp4","file-size-limit":50},on:{"upload-failed":e.uploadFailed,"assign-id-updated":e.uploadSuccess,"no-file-change":e.uploadSuccess}})],1)],1),e._v(" "),a("sk-fixed-bottom",{directives:[{name:"show",rawName:"v-show",value:e.hasBrand,expression:"hasBrand"}]},[a("sk-col",[a("sk-button",{attrs:{label:e.$t("modifyAndSubmit"),action:"commit",primary:""},on:{click:e.saveImg}}),e._v(" "),a("sk-button",{attrs:{label:e.$t("cancel"),action:"cancel"}})],1)],1)],1)],1)],1)},staticRenderFns:[]}},688:function(e,t,a){var s=a(0)(a(927),a(1146),null,null,null);e.exports=s.exports},927:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(6),i=a.n(s),r=a(134),n=a(129),o=a(8);t.default={data:function(){return{queryDs:null,brandGlobal:r.a,uploadSuccessNum:0,hasBrand:!1,baseData:n.a}},computed:i()({},a.i(o.a)({brandInfo:"brand/info"})),methods:i()({},a.i(o.b)({alter:"brand/alter"}),{onLoadGradeInfoDs:function(e){var t=this.gradeData=e[0].getData();this.hasBrand=t.hasBrandGlobal},uploadSuccessPic:function(e,t){this.queryDs.getCurrentRecord().setValue("logo",t[0].src),this.uploadSuccess(e)},uploadSuccessBody:function(e,t){this.queryDs.getCurrentRecord().setValue("bodyAttachList",t),this.uploadSuccess(e)},uploadSuccess:function(){5==++this.uploadSuccessNum&&this.submit()},saveImg:function(){this.queryDs.sendVerify(),this.queryDs.getCurrentRecord().getVerifyResult().ifPassVerify?(this.$store.commit("loading",this.$t("inTheSave")),this.uploadAll()):this.$store.commit("message",this.$t("enterFull"))},uploadAll:function(){this.uploadSuccessNum=0;var e=this.$refs.headAssignAtta;e.save(),e=this.$refs.headAtta,e.save(),e=this.$refs.bodyAtta,e.save(),e=this.$refs.mainBusinessAtta,e.save(),e=this.$refs.videoPicAttach,e.save()},uploadFailed:function(){this.uploadSuccessNum=0,this.$store.commit("hideLoading")},submit:function(){var e=this.queryDs.getCurrentData();e=this.$base.deepCopy(e),delete e.bodyAttachList,delete e.picAttachList,delete e.logo,delete e.updateTime,r.a.saveOrUpdate.execute({data:e,mask:{info:this.$t("inTheSave")},success:function(){this.$store.commit("message",this.$t("succeedSave")),this.alter(this.$base.deepCopy(this.queryDs.getCurrentData()))}.bind(this)})}})}}});
//# sourceMappingURL=45.6b8eaf5200f0d11b570e.js.map