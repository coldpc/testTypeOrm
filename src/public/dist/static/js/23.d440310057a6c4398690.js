webpackJsonp([23],{1130:function(t,e,s){function a(t){s(990)}var n=s(0)(s(938),s(1144),a,"data-v-2dcb080c",null);t.exports=n.exports},1138:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("sk-reload",{attrs:{name:"page.item.assignDetail"}},[s("sk-assign-detail",{attrs:{editable:!0}})],1)},staticRenderFns:[]}},1144:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main-container"},[s("div",{staticClass:"data-sets-con"},[s("sk-data-set",{attrs:{"query-para":{itemId:this.itemId,storeId:this.storeId,countryId:this.countryId},"query-mask":{info:t.$t("loading")},"query-service":t.itemModule.getItemAssignDetail,"auto-query":""},on:{load:t.loadAssignDetail}}),t._v(" "),s("sk-data-set",{attrs:{"auto-query":!1,"query-service":t.baseData.getVendorGrade},model:{value:t.vendorGradeDs,callback:function(e){t.vendorGradeDs=e},expression:"vendorGradeDs"}})],1),t._v(" "),s("sk-fold",{attrs:{title:t.$t("baseInfo")}},[s("div",{staticClass:"base-info-item"},[s("sk-row",[s("sk-col",{attrs:{size:3}},[s("sk-text-view",{attrs:{label:t.$t("itemName"),value:t.item.itemName}})],1),t._v(" "),s("sk-col",{attrs:{size:3}},[s("sk-text-view",{attrs:{label:t.$t("itemModel"),value:t.item.itemModel}})],1),t._v(" "),s("sk-col",{attrs:{size:3}})],1)],1),t._v(" "),s("div",{staticClass:"base-info-item"},[s("sk-row",[s("sk-col",{attrs:{size:3}},[s("sk-text-view",{attrs:{label:t.$t("category"),value:t.item.parentCatalogName}})],1),t._v(" "),s("sk-col",{attrs:{size:3}},[s("sk-text-view",{attrs:{label:t.$t("subCategory"),value:t.item.subCategoryDisplay}})],1),t._v(" "),s("sk-col",{attrs:{size:3}},[s("sk-text-view",{attrs:{label:t.$t("currency"),value:t.item.unit}})],1)],1)],1),t._v(" "),s("div",{staticClass:"base-info-item"},[s("sk-row",[s("sk-col",{attrs:{size:3}},[s("sk-text-view",{attrs:{label:t.$t("price"),value:t.item.storePrice}})],1),t._v(" "),s("sk-col",{attrs:{size:3}},[s("sk-text-view",{attrs:{label:t.$t("tag"),value:t.item.itemName}})],1),t._v(" "),s("sk-col",{attrs:{size:3}},[s("sk-text-view",{attrs:{label:t.$t("remark"),value:t.item.remark}})],1)],1)],1)]),t._v(" "),s("sk-fold",{attrs:{title:t.$t("assignInfo")}},[s("table",{staticClass:"view-table parent-td assigned-table"},[s("thead",[s("td",{staticClass:"expand-td"}),t._v(" "),s("td",{staticClass:"index-td"},[t._v("NO")]),t._v(" "),s("td",{staticClass:"country-td"},[t._v(t._s(t.$t("assignCountryNum")))]),t._v(" "),s("td",{staticClass:"store-td"},[t._v(t._s(t.$t("assignStoreNum")))]),t._v(" "),s("td",{staticClass:"on-store-td"},[t._v(t._s(t.$t("onlineStoreNum")))]),t._v(" "),s("td",{staticClass:"option-td"},[t._v(t._s(t.$t("operation")))])]),t._v(" "),t.assignedData&&t.assignedData.length>0?s("tbody",[t._l(t.assignedData,function(e,a){return[s("tr",[s("td",{staticClass:"expand-td"},[e&&e.storeAssignDtos&&e.storeAssignDtos.length>0?s("span",{on:{click:function(s){t.expandView(a,e)}}},[s("mu-icon-button",{directives:[{name:"show",rawName:"v-show",value:!e.expanded,expression:"!item.expanded"}],attrs:{id:"expanded-btn-"+e.crid,icon:"add"}}),t._v(" "),s("mu-icon-button",{directives:[{name:"show",rawName:"v-show",value:e.expanded,expression:"item.expanded"}],attrs:{id:"unexpanded-btn-"+e.crid,icon:"remove"}})],1):t._e()]),t._v(" "),s("td",{staticClass:"index-td"},[t._v(t._s(a+1))]),t._v(" "),s("td",{staticClass:"country-td"},[t._v(t._s(e.country?e.country.countryName+" "+e.country.enName:""))]),t._v(" "),s("td",{staticClass:"store-td"},[t._v(t._s(e.assignStoryNum))]),t._v(" "),s("td",{staticClass:"on-store-td"},[t._v(t._s(e.onStoreNum))]),t._v(" "),s("td",{staticClass:"option-td"},[s("a",{on:{click:function(s){t.cancelAssignOneCountry(a,e)}}},[t._v(t._s(t.$t("delete")))])])]),t._v(" "),e.expanded?t._l(e.storeAssignDtos,function(n,i){return s("tr",{key:"child"+i,staticClass:"expand-child-row",attrs:{id:"expand-child-row-"+e.crid}},[s("td",{staticClass:"expand-td"}),t._v(" "),s("td",{staticClass:"index-td"},[t._v(t._s(a+1+"."+(i+1)))]),t._v(" "),s("td",{staticClass:"country-td"},[t._v(t._s(n.store?n.store.storeName:""))]),t._v(" "),s("td",{attrs:{colspan:"2"}},["ONLINE"==n.shelfFlag?s("span",[t._v(t._s(t.$t("online")))]):s("span",[t._v(t._s(t.$t("offline")))])]),t._v(" "),s("td",{staticClass:"option-td",attrs:{height:"1px"}},["ONLINE"==n.shelfFlag?s("a",{on:{click:function(e){t.offline(a,n)}}},[t._v(t._s(t.$t("offline")))]):s("a",{on:{click:function(e){t.online(a,n)}}},[t._v(t._s(t.$t("online")))]),t._v(" "),"OFFLINE"==n.shelfFlag?s("a",{on:{click:function(e){t.deleteItem(a,i,n)}}},[t._v(t._s(t.$t("delete")))]):t._e()])])}):t._e()]})],2):s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"6"}},[t._v(t._s(t.$t("noData")))])])])])]),t._v(" "),s("sk-fold",{attrs:{title:t.$t("unAssignInfo")}},[t.vendorGradeData.hasStore?t._e():s("div",{staticStyle:{"padding-bottom":"10px"}},["country"==t.type?s("sk-button",{attrs:{primary:"",label:t.$t("assign")},on:{click:t.gotoAssignStore}}):s("sk-button",{attrs:{primary:"",label:t.$t("assign")},on:{click:t.gotoAssignCountry}})],1),t._v(" "),s("sk-row",[s("sk-col",{attrs:{width:"100"}},[s("table",{staticClass:"view-table"},[s("thead",[s("td",{staticClass:"index-td"},[t._v("NO")]),t._v(" "),s("td",{staticClass:"name-td"},[t._v(t._s(t.$t("countryArea")))]),t._v(" "),s("td",{staticClass:"name-td"},[t._v(t._s(t.$t("store")))])]),t._v(" "),s("tbody",t._l(t.unAssignData,function(e,a){return s("tr",[s("td",{staticClass:"index-td"},[t._v(t._s(a+1))]),t._v(" "),s("td",{staticClass:"name-td"},[t._v(t._s(e.country.countryName+" "+e.country.enName))]),t._v(" "),s("td",{staticClass:"name-td"},[t._v(t._s(e.store.storeName))])])}))])])],1)],1)],1)},staticRenderFns:[]}},690:function(t,e,s){var a=s(0)(s(930),s(1138),null,null,null);t.exports=a.exports},718:function(t,e,s){"use strict";var a=s(38),n={enumeration:{baseInfoType:{attr:"ATTRIBUTE",spec:"SPEC"}},getItems:{url:"/item/getItemsByQueryParams",paras:{rootCatalogId:"",countryId:103e3,order:"asc",offset:0,limit:10,storeId:""}},getItemsForActivitySelect:{url:"/item/getItemsForActivitySelect",paras:{}},deleteByIds:{url:"/item/deleteByIds",event:"",params:{itemIds:"itemIds"}},online:{url:"/item/changeToOnLine",event:"",params:{itemIds:"itemIds"}},offline:{url:"/item/changeToOffLine",event:"",params:{itemIds:"itemIds"}},cancelAssign:{url:"/item/assignCancel",event:"",params:{itemIds:"itemIds"}},getItemsOrderBySort:{url:"/item/getItemsOrderBySort",event:"",params:{rootCatalogId:"",catalogId:""}},batchUpdateItemSort:{url:"/item/batchUpdateItemSort",params:{itemListString:""}},getItemBaseInfo:{url:"/itemAttributeMaster/queryByTypeAndCatalogIdOrderBySort",params:{catalogId:"",type:""}},getItemById:{url:"/item/getItemSaveOrInsert",event:"",params:{itemId:""}},maintain:{url:"/item/saveOrInsert",contentType:"application/json",params:{}},getAssignCountryDetail:{url:"/itemAssigned/getCountryTodoAssigned",params:{itemIds:""}},assignCountry:{contentType:"json",url:"/itemAssigned/countryAssigned",params:{}},unAssignCountry:{contentType:"json",url:"/itemAssigned/countryUnAssigned",params:{}},getAssignStoreDetail:{url:"/itemAssigned/getStoreTodoAssigned",itemIds:""},assignStore:{contentType:"json",url:"/itemAssigned/storeAssigned",params:{hasShelfFlag:"",itemList:"",optStores:""}},unAssignStore:{contentType:"json",url:"/itemAssigned/storeUnAssigned",params:{hasShelfFlag:"",itemList:"",optStores:""}},getItemAssignDetail:{url:"/itemAssigned/getItemAssignsDetail",params:{itemId:""}},cancelAssignOneCountry:{url:"/itemAssigned/unAssignedCountry",paras:{itemIds:""}}};e.a=s.i(a.a)(n,"order")},930:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(1130),n=s.n(a);e.default={components:{"sk-assign-detail":n.a},data:function(){return{}}}},938:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(718),n=s(129);s(39);e.default={data:function(){return window.test=this,{itemId:this.$route.query.itemId,type:this.$route.query.type,storeId:this.$route.query.storeId,countryId:this.$route.query.countryId,item:{},assignedData:{},unAssignData:{},vendorGradeData:{},vendorGradeDs:null,rowExpandedController:{},itemModule:a.a,baseData:n.a}},created:function(){},methods:{onLoadVendorData:function(t){this.vendorGradeData=t[0].getData()},loadAssignDetail:function(t){var e=t[0].getData();this.item=e.item,this.item.subCategoryDisplay=this.item.catalogNameList.join(","),this.unAssignData=e.unAssignDtos;for(var s=this.assignedData=e.assignedDtos,a=parseInt(1e4*Math.random())+1e4,n=0,i=s.length;n<i;n++)s[n].crid=a+1;return this.vendorGradeDs.query({storeId:e.item.storeId}),e},online:function(t,e){a.a.online.execute({data:{itemIds:e.storeItemId},success:function(){e.shelfFlag="ONLINE",this.refreshAssignItem(t),e=null,t=null}.bind(this)})},offline:function(t,e){a.a.offline.execute({data:{itemIds:e.storeItemId},success:function(){e.shelfFlag="OFFLINE",this.refreshAssignItem(t,e),e=null,t=null}.bind(this)})},refreshAssignItem:function(t,e){var s=this.assignedData[t],a=0,n=void 0;e=s.storeAssignDtos||[];for(var i=0,d=e.length;i<d;i++)n=e[i],"ONLINE"==n.shelfFlag&&a++;s.onStoreNum=a,s.assignStoryNum=e.length,this.$set(this.assignedData,t,s)},deleteItem:function(t,e,s){a.a.deleteByIds.execute({data:{itemIds:s.storeItemId},success:function(){this.assignedData[t].storeAssignDtos.splice(e,1),this.refreshAssignItem(t),s=null,t=null,e=null}.bind(this)})},cancelAssignOneCountry:function(t,e){a.a.cancelAssignOneCountry.execute({data:{itemIds:e.countryItemId},success:function(){this.assignedData.splice(t,1)}.bind(this)})},toggleRow:function(t,e){e.expanded=!0,this.$set(this.assignedData,t,e)},expandView:function(t,e){e.expanded=!e.expanded,this.$set(this.assignedData,t,e)},gotoAssignStore:function(){this.$store.dispatch("router/push",{title:"分配门店",query:{ids:this.itemId},name:"page.item.assignStore"})},gotoAssignCountry:function(){this.$store.dispatch("router/push",{title:"分配国家",query:{ids:this.itemId},name:"page.item.assignCountry"})}}}},968:function(t,e,s){e=t.exports=s(1)(!0),e.push([t.i,".view-table[data-v-2dcb080c]{border-collapse:collapse;table-layout:fixed;width:100%}.view-table td[data-v-2dcb080c]{border:1px solid #eee;border-left:none;border-right:none;border-collapse:collapse;padding:10px}.view-table .index-td[data-v-2dcb080c]{width:80px}.view-table .parent-td[data-v-2dcb080c]{padding:0;border:none}.view-table .child-table:last-child td[data-v-2dcb080c]{border-bottom:none}.base-info-item[data-v-2dcb080c]{line-height:30px}.base-info-item+.base-info-item[data-v-2dcb080c]{margin-top:10px}.assigned-table[data-v-2dcb080c]{border-top:1px solid #eee}.assigned-table .expand-td[data-v-2dcb080c]{padding:0;text-align:center}.assigned-table .expand-td[data-v-2dcb080c],.assigned-table .index-td[data-v-2dcb080c]{width:100px}.assigned-table .name-td[data-v-2dcb080c],.assigned-table .on-store-td[data-v-2dcb080c],.assigned-table .store-td[data-v-2dcb080c]{width:150px}.assigned-table .option-td[data-v-2dcb080c]{width:200px}.assigned-table td[data-v-2dcb080c]{height:50px}.assigned-table thead td[data-v-2dcb080c]{border:none}.assigned-table a+a[data-v-2dcb080c]{margin-left:10px}","",{version:3,sources:["F:/project/vueMuseUI-master/src/page/item/plugins/assignDetail.vue"],names:[],mappings:"AACA,6BACE,yBAA0B,AAC1B,mBAAoB,AACpB,UAAY,CACb,AACD,gCACE,sBAAuB,AACvB,iBAAkB,AAClB,kBAAmB,AACnB,yBAA0B,AAC1B,YAAc,CACf,AACD,uCACE,UAAY,CACb,AACD,wCACE,UAAW,AACX,WAAa,CACd,AACD,wDACE,kBAAoB,CACrB,AACD,iCACE,gBAAkB,CACnB,AACD,iDACE,eAAiB,CAClB,AACD,iCACE,yBAA2B,CAC5B,AACD,4CACE,UAAa,AACb,iBAAmB,CACpB,AACD,uFACE,WAAa,CACd,AACD,mIACE,WAAa,CACd,AACD,4CACE,WAAa,CACd,AACD,oCACE,WAAa,CACd,AACD,0CACE,WAAa,CACd,AACD,qCACE,gBAAkB,CACnB",file:"assignDetail.vue",sourcesContent:["\n.view-table[data-v-2dcb080c] {\n  border-collapse: collapse;\n  table-layout: fixed;\n  width: 100%;\n}\n.view-table td[data-v-2dcb080c] {\n  border: 1px solid #eee;\n  border-left: none;\n  border-right: none;\n  border-collapse: collapse;\n  padding: 10px;\n}\n.view-table .index-td[data-v-2dcb080c] {\n  width: 80px;\n}\n.view-table .parent-td[data-v-2dcb080c] {\n  padding: 0;\n  border: none;\n}\n.view-table .child-table:last-child td[data-v-2dcb080c] {\n  border-bottom: none;\n}\n.base-info-item[data-v-2dcb080c] {\n  line-height: 30px;\n}\n.base-info-item + .base-info-item[data-v-2dcb080c] {\n  margin-top: 10px;\n}\n.assigned-table[data-v-2dcb080c] {\n  border-top: 1px solid #eee;\n}\n.assigned-table .expand-td[data-v-2dcb080c] {\n  padding: 0px;\n  text-align: center;\n}\n.assigned-table .expand-td[data-v-2dcb080c], .assigned-table .index-td[data-v-2dcb080c] {\n  width: 100px;\n}\n.assigned-table .name-td[data-v-2dcb080c], .assigned-table .store-td[data-v-2dcb080c], .assigned-table .on-store-td[data-v-2dcb080c] {\n  width: 150px;\n}\n.assigned-table .option-td[data-v-2dcb080c] {\n  width: 200px;\n}\n.assigned-table td[data-v-2dcb080c] {\n  height: 50px;\n}\n.assigned-table thead td[data-v-2dcb080c] {\n  border: none;\n}\n.assigned-table a + a[data-v-2dcb080c] {\n  margin-left: 10px;\n}\n"],sourceRoot:""}])},990:function(t,e,s){var a=s(968);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s(2)("1b4759bc",a,!0,{})}});
//# sourceMappingURL=23.d440310057a6c4398690.js.map